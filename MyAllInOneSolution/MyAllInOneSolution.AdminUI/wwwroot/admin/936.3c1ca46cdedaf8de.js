"use strict";(self.webpackChunkidentity_express_manager_ui=self.webpackChunkidentity_express_manager_ui||[]).push([[936],{7936:(Di,Y,r)=>{r.r(Y),r.d(Y,{EditClientModule:()=>Ei});var g=r(6895),se=r(2979),a=r(4006),H=r(388),ae=r(9241),le=r(5241),b=r(8185),d=r(9383),S=r(8176),h=r(590),Q=r(8895),v=r(5259),C=r(572),L=r(6349),O=r(5613),e=r(4650),M=r(7185),m=r(4608),T=r(9470),Z=r(6219),x=r(8285),u=r(7608),f=r(799),U=r(2808),w=r(8163),k=r(965);const $=["addButton"];function re(n,l){if(1&n){const t=e.EpF();e.TgZ(0,"app-form-row",0)(1,"app-form-toggle",13)(2,"input",14),e.NdJ("ngModelChange",function(o){e.CHM(t);const s=e.oxw();return e.KtG(s.newUrl.isRedirectUri=o)}),e.qZA()()()}if(2&n){const t=e.oxw();e.Q6J("id","addRedirectUri")("label","Common.Callback")("help","Clients.URLS.SendTokens")("isLast",!t.clientViewService.applicationUrls.postLogoutRedirectUris&&!t.clientViewService.applicationUrls.allowedCorsOrigins),e.xp6(1),e.Q6J("id","addRedirectUri"),e.xp6(1),e.Q6J("checked",t.newUrl.isRedirectUri)("ngModel",t.newUrl.isRedirectUri)("disabled",0==t.client.redirectUris.length)}}function ce(n,l){if(1&n){const t=e.EpF();e.TgZ(0,"app-form-row",0)(1,"app-form-toggle",13)(2,"input",15),e.NdJ("ngModelChange",function(o){e.CHM(t);const s=e.oxw();return e.KtG(s.newUrl.isPostLogoutRedirectUri=o)}),e.qZA()()()}if(2&n){const t=e.oxw();e.Q6J("id","addPostLogoutRedirectUri")("label","Common.Signout")("help","Clients.URLS.RedirectAfterLogout")("isLast",!t.clientViewService.applicationUrls.allowedCorsOrigins),e.xp6(1),e.Q6J("id","addPostLogoutRedirectUri"),e.xp6(1),e.Q6J("checked",t.newUrl.isPostLogoutRedirectUri)("ngModel",t.newUrl.isPostLogoutRedirectUri)}}function pe(n,l){if(1&n){const t=e.EpF();e.TgZ(0,"app-form-row",0)(1,"app-form-toggle",13)(2,"input",16),e.NdJ("ngModelChange",function(o){e.CHM(t);const s=e.oxw();return e.KtG(s.newUrl.isAllowedCorsOrigin=o)}),e.qZA()()()}if(2&n){const t=e.oxw();e.Q6J("id","corsOrigin")("label","Common.CORS")("help","Clients.URLS.CORSDomain")("isLast",!0),e.xp6(1),e.Q6J("id","corsOrigin"),e.xp6(1),e.Q6J("checked",t.newUrl.isAllowedCorsOrigin)("ngModel",t.newUrl.isAllowedCorsOrigin)("disabled",t.client.allowedGrantTypes.includes(t.grantTypes.Device))}}function de(n,l){1&n&&e._UZ(0,"app-data-table-column",17),2&n&&e.Q6J("title","Common.Callback")("headClasses","tw-text-center")("cellClasses","tw-text-center")("prop","isRedirectUri")("isBoolean",!0)}function ue(n,l){1&n&&e._UZ(0,"app-data-table-column",17),2&n&&e.Q6J("title","Common.Signout")("headClasses","tw-text-center")("cellClasses","tw-text-center")("prop","isPostLogoutRedirectUri")("isBoolean",!0)}function me(n,l){1&n&&e._UZ(0,"app-data-table-column",17),2&n&&e.Q6J("title","Common.CORS")("headClasses","tw-text-center")("cellClasses","tw-text-center")("prop","isAllowedCorsOrigin")("isBoolean",!0)}function he(n,l){if(1&n){const t=e.EpF();e.TgZ(0,"app-form-row",0)(1,"app-form-toggle",13)(2,"input",19),e.NdJ("ngModelChange",function(o){e.CHM(t);const s=e.oxw(2);return e.KtG(s.editingUrl.isRedirectUri=o)}),e.qZA()()()}if(2&n){const t=e.oxw(2);e.Q6J("id","editRedirectUri")("label","Common.Callback")("help","Clients.URLS.SendTokens")("isLast",!t.clientViewService.applicationUrls.postLogoutRedirectUris&&!t.clientViewService.applicationUrls.allowedCorsOrigins),e.xp6(1),e.Q6J("id","editRedirectUri"),e.xp6(1),e.Q6J("checked",t.editingUrl.isRedirectUri||0==t.client.redirectUris.length)("ngModel",t.editingUrl.isRedirectUri)("disabled",0==t.client.redirectUris.length)}}function ge(n,l){if(1&n){const t=e.EpF();e.TgZ(0,"app-form-row",0)(1,"app-form-toggle",13)(2,"input",20),e.NdJ("ngModelChange",function(o){e.CHM(t);const s=e.oxw(2);return e.KtG(s.editingUrl.isPostLogoutRedirectUri=o)}),e.qZA()()()}if(2&n){const t=e.oxw(2);e.Q6J("id","editPostLogoutRedirectUri")("label","Common.Signout")("help","Clients.URLS.RedirectAfterLogout")("isLast",!t.clientViewService.applicationUrls.allowedCorsOrigins),e.xp6(1),e.Q6J("id","editPostLogoutRedirectUri"),e.xp6(1),e.Q6J("checked",t.editingUrl.isPostLogoutRedirectUri)("ngModel",t.editingUrl.isPostLogoutRedirectUri)}}function Ce(n,l){if(1&n){const t=e.EpF();e.TgZ(0,"app-form-row",0)(1,"app-form-toggle",13)(2,"input",21),e.NdJ("ngModelChange",function(o){e.CHM(t);const s=e.oxw(2);return e.KtG(s.editingUrl.isAllowedCorsOrigin=o)}),e.qZA()()()}if(2&n){const t=e.oxw(2);e.Q6J("id","editCorsOrigin")("label","Common.CORS")("help","Clients.URLS.CORSDomain")("isLast",!0),e.xp6(1),e.Q6J("id","editCorsOrigin"),e.xp6(1),e.Q6J("checked",t.editingUrl.isAllowedCorsOrigin)("ngModel",t.editingUrl.isAllowedCorsOrigin)("disabled",t.client.allowedGrantTypes.includes(t.grantTypes.Device))}}function fe(n,l){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"app-form-row",6)(2,"input",18),e.NdJ("ngModelChange",function(o){e.CHM(t);const s=e.oxw();return e.KtG(s.editingUrl.url=o)}),e.qZA()(),e.YNc(3,he,3,8,"app-form-row",8),e.YNc(4,ge,3,7,"app-form-row",8),e.YNc(5,Ce,3,8,"app-form-row",8),e.BQk()}if(2&n){const t=e.oxw();e.xp6(1),e.Q6J("id","editUrl")("label","Common.URL"),e.xp6(1),e.Q6J("ngModel",t.editingUrl.url),e.xp6(1),e.Q6J("ngIf",t.clientViewService.applicationUrls.redirectUris),e.xp6(1),e.Q6J("ngIf",t.clientViewService.applicationUrls.postLogoutRedirectUris),e.xp6(1),e.Q6J("ngIf",t.clientViewService.applicationUrls.allowedCorsOrigins)}}let _e=(()=>{class n{constructor(t,i,o,s,c,_,A){this.translate=t,this.toastr=i,this.clientCachingService=o,this.clientViewService=s,this.modalService=c,this.dataTableService=_,this.fb=A,this.grantTypes=Q.q,this.pathCheck=S.AZ,this.addModalActions=[v.n.Save],this.addModalId="addAppURLModal",this.editModalActions=[v.n.Save],this.editModalId="editAppURLModal",this.urlDataTableActions=[C.Xz.Select,C.Xz.Delete]}mapUrlToApplicationUrl(t){const i=this.client.allowedCorsOrigins.includes(t),o=this.client.redirectUris.includes(t),s=this.client.postLogoutRedirectUris.includes(t);return new O.m(t,i,o,s)}ngOnInit(){this.clientCachingService.unsavedCache$.pipe((0,h.P)()).subscribe(t=>{this.client=JSON.parse(JSON.stringify(t)),this.initNewUrlDefaults();const i=this.client.allowedCorsOrigins.concat(this.client.redirectUris,this.client.postLogoutRedirectUris);this.allArr=L.jj(i).map(o=>this.mapUrlToApplicationUrl(o)).sort((o,s)=>o.url.localeCompare(s.url)),this.initFormCtl()}),this.subscription=this.dataTableService.deleteRowEvent.subscribe(t=>{this.deleteUrl(t)})}initFormCtl(){this.initiateLoginFormCtl=this.fb.control(this.client.initiateLoginUri,[a.kI.pattern("^https://.{1,}$")]),this.initiateLoginFormCtl.valueChanges.subscribe(t=>{let i={...this.client,initiateLoginUri:t};this.updateClient(i)})}initNewUrlDefaults(){this.newUrl=new O.m("",!1,!1,!1),this.client.allowedGrantTypes.includes(Q.q.Device)?this.newUrl.isAllowedCorsOrigin=!0:this.newUrl.isRedirectUri=!0}ngOnDestroy(){this.subscription?.unsubscribe()}openAddModal(){this.modalService.showById(this.addModalId,this.addButtonRef)}cancelAdd(){this.initNewUrlDefaults(),this.modalService.hideById(this.addModalId)}cancelEdit(){this.editingUrl=null,this.modalService.hideById(this.editModalId)}deleteUrl(t){const i=this.allArr[t];if(!this.client.allowedGrantTypes.includes(this.grantTypes.Device)&&1===this.client.redirectUris.length&&i.isRedirectUri)return void this.toastr.error(this.translate.instant("Clients.URLS.NoURLS"),this.translate.instant("Notifications.Sorry"));const o=JSON.parse(JSON.stringify(this.client));if(i.isRedirectUri){const s=o.redirectUris.indexOf(i.url);o.redirectUris.splice(s,1)}if(i.isPostLogoutRedirectUri){const s=o.postLogoutRedirectUris.indexOf(i.url);o.postLogoutRedirectUris.splice(s,1)}if(i.isAllowedCorsOrigin){const s=o.allowedCorsOrigins.indexOf(i.url);o.allowedCorsOrigins.splice(s,1)}this.updateClient(o)}isAddButtonDisabled(){return this.allArr.findIndex(t=>this.newUrl.url===t.url)>-1||this.disableButtonLogic(this.newUrl)}disableButtonLogic(t){return!(!(0,S.hr)(t.url)&&""!==t.url.trim()&&(t.isAllowedCorsOrigin||t.isPostLogoutRedirectUri||t.isRedirectUri)&&(!(0,S.AZ)(t.url)||!t.isAllowedCorsOrigin||(this.toastr.warning(this.translate.instant("Clients.CORSUrl"),this.translate.instant("Notifications.Warning")),0)))}isEditButtonDisabled(){return!!this.editingUrl&&this.disableButtonLogic(this.editingUrl)}editUrl(t){const i=t.data,o=this.allArr.findIndex(s=>s.url===i.url);this.editingUrl=new O.$(i.url,i.isAllowedCorsOrigin,i.isRedirectUri,i.isPostLogoutRedirectUri,o),this.modalService.showById(this.editModalId,this.editButtonRef)}saveEdit(){const t=this.editingUrl.url===this.editingUrl.oldUrl?this.editingUrl.url:this.editingUrl.oldUrl,i=this.client.redirectUris.indexOf(t),o=this.client.postLogoutRedirectUris.indexOf(t),s=this.client.allowedCorsOrigins.indexOf(t);i>-1&&this.client.redirectUris.splice(i,1),o>-1&&this.client.postLogoutRedirectUris.splice(o,1),s>-1&&this.client.allowedCorsOrigins.splice(s,1),this.allArr.splice(this.editingUrl.index,1),this.addUrl(this.editingUrl)}addUrl(t){const i=(0,S.lm)(t.url);if(i){let s;switch(i){case"https://":case"http://":s=new RegExp("https?://(?:www.|(?!www))[a-zA-Z0-9][a-zA-Z0-9-]+[a-zA-Z0-9].[^s]{2,}|www.[a-zA-Z0-9][a-zA-Z0-9-]+[a-zA-Z0-9].[^s]{2,}|https?://(?:www.|(?!www))[a-zA-Z0-9].[^s]{2,}|www.[a-zA-Z0-9].[^s]{2,}"),s.exec(t.url)||this.toastr.warning(this.translate.instant("Clients.UrlNotValid"),this.translate.instant("Notifications.Warning"));break;case"urn:":s=new RegExp("^urn:[a-z0-9][a-z0-9-]{0,31}:[a-z0-9()+,-.:=@;$_!*'%/?#]+$"),s.exec(t.url)||this.toastr.warning(this.translate.instant("Clients.UrlNotValid"),this.translate.instant("Notifications.Warning"))}}const o=JSON.parse(JSON.stringify(this.client));o.allowedGrantTypes.includes(Q.q.Device)?o.allowedCorsOrigins.push(t.url):(t.isRedirectUri&&o.redirectUris.push(t.url),t.isPostLogoutRedirectUri&&o.postLogoutRedirectUris.push(t.url),t.isAllowedCorsOrigin&&o.allowedCorsOrigins.push(t.url)),this.updateClient(o),this.initNewUrlDefaults()}updateClient(t){this.clientCachingService.componentDirtyValidMap.set("ApplicationUrlsComponent",{isValid:this.initiateLoginFormCtl.valid}),this.client=t;const i=this.client.allowedCorsOrigins.concat(this.client.redirectUris,this.client.postLogoutRedirectUris);this.allArr=L.jj(i).map(o=>this.mapUrlToApplicationUrl(o)).sort((o,s)=>o.url.localeCompare(s.url)),this.clientCachingService.unsavedCache.next(t)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(d.sK),e.Y36(M._W),e.Y36(m.Z),e.Y36(T.a),e.Y36(Z.Z),e.Y36(x.n),e.Y36(a.QS))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-application-urls"]],viewQuery:function(t,i){if(1&t&&(e.Gf($,5),e.Gf($,5)),2&t){let o;e.iGM(o=e.CRH())&&(i.addButtonRef=o.first),e.iGM(o=e.CRH())&&(i.editButtonRef=o.first)}},decls:21,vars:36,consts:[[3,"id","label","help","isLast"],["id","initiateLoginUrl","type","url","name","initiateLoginUrl",1,"tw-form-control",3,"formControl"],["right",""],[1,"tw-btn-success",3,"id","click"],["addButton",""],[3,"title","actions","modalId","addDisabled","saveText","onCancel","onSave"],[3,"id","label"],["id","addUrl","type","url","name","addUrl",1,"tw-form-control",3,"ngModel","ngModelChange"],[3,"id","label","help","isLast",4,"ngIf"],["id","appUrls",3,"rows","actions","norowslabel","onSelect"],[3,"title","headClasses","cellClasses","prop"],[3,"title","headClasses","cellClasses","prop","isBoolean",4,"ngIf"],[4,"ngIf"],[3,"id"],["id","addRedirectUri","type","checkbox","name","addRedirectUri",1,"tw-form-switch__input",3,"checked","ngModel","disabled","ngModelChange"],["id","addPostLogoutRedirectUri","type","checkbox","name","addPostLogoutRedirectUri",1,"tw-form-switch__input",3,"checked","ngModel","ngModelChange"],["id","corsOrigin","type","checkbox","name","corsOrigin",1,"tw-form-switch__input",3,"checked","ngModel","disabled","ngModelChange"],[3,"title","headClasses","cellClasses","prop","isBoolean"],["id","editUrl","type","url","name","editUrl",1,"tw-form-control",3,"ngModel","ngModelChange"],["id","editRedirectUri","type","checkbox","name","editRedirectUri",1,"tw-form-switch__input",3,"checked","ngModel","disabled","ngModelChange"],["id","editPostLogoutRedirectUri","type","checkbox","name","editPostLogoutRedirectUri",1,"tw-form-switch__input",3,"checked","ngModel","ngModelChange"],["id","editCorsOrigin","type","checkbox","name","editCorsOrigin",1,"tw-form-switch__input",3,"checked","ngModel","disabled","ngModelChange"]],template:function(t,i){1&t&&(e.TgZ(0,"app-form-row",0),e._UZ(1,"input",1),e.qZA(),e.TgZ(2,"app-action-bar"),e.ynx(3,2),e.TgZ(4,"button",3,4),e.NdJ("click",function(){return i.openAddModal()}),e._uU(6),e.ALo(7,"translate"),e.qZA(),e.BQk(),e.qZA(),e.TgZ(8,"app-custom-modal",5),e.NdJ("onCancel",function(){return i.cancelAdd()})("onSave",function(){return i.addUrl(i.newUrl)}),e.TgZ(9,"app-form-row",6)(10,"input",7),e.NdJ("ngModelChange",function(s){return i.newUrl.url=s}),e.qZA()(),e.YNc(11,re,3,8,"app-form-row",8),e.YNc(12,ce,3,7,"app-form-row",8),e.YNc(13,pe,3,8,"app-form-row",8),e.qZA(),e.TgZ(14,"app-data-table",9),e.NdJ("onSelect",function(s){return i.editUrl(s)}),e._UZ(15,"app-data-table-column",10),e.YNc(16,de,1,5,"app-data-table-column",11),e.YNc(17,ue,1,5,"app-data-table-column",11),e.YNc(18,me,1,5,"app-data-table-column",11),e.qZA(),e.TgZ(19,"app-custom-modal",5),e.NdJ("onCancel",function(){return i.cancelEdit()})("onSave",function(){return i.saveEdit()}),e.YNc(20,fe,6,6,"ng-container",12),e.qZA()),2&t&&(e.Q6J("id","initiateLoginUrl")("label","Clients.URLS.InitiateLogin.Label")("help","Clients.URLS.InitiateLogin.Help")("isLast",!1),e.xp6(1),e.Q6J("formControl",i.initiateLoginFormCtl),e.xp6(3),e.Q6J("id","addUrlButton"),e.xp6(2),e.hij(" ",e.lcZ(7,34,"Clients.URLS.AddURL")," "),e.xp6(2),e.Q6J("title","Clients.URLS.AddURL")("actions",i.addModalActions)("modalId",i.addModalId)("addDisabled",i.isAddButtonDisabled())("saveText","Common.Add"),e.xp6(1),e.Q6J("id","addUrl")("label","Common.URL"),e.xp6(1),e.Q6J("ngModel",i.newUrl.url),e.xp6(1),e.Q6J("ngIf",i.clientViewService.applicationUrls.redirectUris),e.xp6(1),e.Q6J("ngIf",i.clientViewService.applicationUrls.postLogoutRedirectUris),e.xp6(1),e.Q6J("ngIf",i.clientViewService.applicationUrls.allowedCorsOrigins),e.xp6(1),e.Q6J("rows",i.allArr)("actions",i.urlDataTableActions)("norowslabel","Clients.URLS.None"),e.xp6(1),e.Q6J("title","Common.URL")("headClasses","tw-w-1/2")("cellClasses","tw-max-w-0 tw-truncate")("prop","url"),e.xp6(1),e.Q6J("ngIf",i.clientViewService.applicationUrls.redirectUris),e.xp6(1),e.Q6J("ngIf",i.clientViewService.applicationUrls.postLogoutRedirectUris),e.xp6(1),e.Q6J("ngIf",i.clientViewService.applicationUrls.allowedCorsOrigins),e.xp6(1),e.Q6J("title","Clients.URLS.EditApplicationURL")("actions",i.editModalActions)("modalId",i.editModalId)("addDisabled",i.isEditButtonDisabled())("saveText","Common.Save"),e.xp6(1),e.Q6J("ngIf",i.editingUrl))},dependencies:[g.O5,a.Fj,a.Wl,a.JJ,a.On,a.oH,u.L,f.O,C.Qj,U.E,w.K,k.R,d.X$],encapsulation:2,changeDetection:0}),n})();var y=r(9465);let ve=(()=>{class n{constructor(t,i){this.clientCachingService=t,this.fb=i}ngOnInit(){this.clientCachingService.unsavedCache$.pipe((0,h.P)()).subscribe(t=>{this.client=JSON.parse(JSON.stringify(t)),this.createForm()})}ngAfterViewInit(){this.clientFormSubscription=this.cibaConfigForm.valueChanges.subscribe(t=>{this.clientCachingService.componentDirtyValidMap.set("CibaConfigurationComponent",{isValid:this.cibaConfigForm.valid});const i=JSON.parse(JSON.stringify(this.client));i.cibaLifetime=this.cibaConfigForm.controls.cibaLifetime.value,i.pollingInterval=this.cibaConfigForm.controls.pollingInterval.value,this.clientCachingService.unsavedCache.next(i)})}createForm(){this.cibaConfigForm=this.fb.group({cibaLifetime:[this.client.cibaLifetime,a.kI.required],pollingInterval:[this.client.pollingInterval,a.kI.required]}),this.cibaConfigForm.markAsPristine()}ngOnDestroy(){this.clientFormSubscription.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(m.Z),e.Y36(a.QS))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-ciba-configuration"]],decls:5,vars:8,consts:[[3,"formGroup"],[3,"id","label","help"],["id","CIBALifetime","formControlName","cibaLifetime"],[3,"id","label","help","isLast"],["id","PollingInterval","formControlName","pollingInterval"]],template:function(t,i){1&t&&(e.TgZ(0,"form",0)(1,"app-form-row",1),e._UZ(2,"app-lifetime-picker",2),e.qZA(),e.TgZ(3,"app-form-row",3),e._UZ(4,"app-lifetime-picker",4),e.qZA()()),2&t&&(e.Q6J("formGroup",i.cibaConfigForm),e.xp6(1),e.Q6J("id","CIBALifetime")("label","Common.CIBALifetime")("help","Clients.CIBALifetimeDescription"),e.xp6(2),e.Q6J("id","PollingInterval")("label","Common.PollingInterval")("help","Clients.CIBAPollingIntervalDescription")("isLast",!0))},dependencies:[a._Y,a.JJ,a.JL,a.sg,a.u,u.L,y.U],encapsulation:2}),n})();var Te=r(7199),be=r(1946),q=r(1018),Se=r(146),I=r(4889);const we=["addEditAvailableAssertionsButton"],ye=["addButton"],Ae=["addAvailableAssertionsButton"];function Me(n,l){if(1&n&&(e.TgZ(0,"option"),e._uU(1),e.qZA()),2&n){const t=l.$implicit;e.xp6(1),e.Oqu(t)}}function Ze(n,l){1&n&&(e.TgZ(0,"div",24)(1,"div",25),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&n&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"Clients.ClaimMappings.None")))}function ke(n,l){if(1&n&&(e.TgZ(0,"b",40),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit,i=e.oxw(2);e.xp6(1),e.Oqu(i.getValueAlias(t.value))}}function Je(n,l){if(1&n){const t=e.EpF();e.TgZ(0,"tr")(1,"td",30)(2,"b"),e._uU(3),e.qZA()(),e.TgZ(4,"td",31),e.YNc(5,ke,2,1,"b",32),e.TgZ(6,"span",33),e._uU(7),e.qZA()(),e.TgZ(8,"td",29)(9,"div",34)(10,"button",35,36),e.NdJ("click",function(){const s=e.CHM(t).$implicit,c=e.MAs(11),_=e.oxw(2);return e.KtG(_.openEditModal(s,c))}),e._UZ(12,"span",37),e.TgZ(13,"span",15),e._uU(14),e.ALo(15,"translate"),e.qZA()(),e.TgZ(16,"button",38),e.NdJ("click",function(){const s=e.CHM(t).$implicit,c=e.oxw(2);return e.KtG(c.removeMapping(s.key))}),e._UZ(17,"span",39),e.TgZ(18,"span",15),e._uU(19),e.ALo(20,"translate"),e.qZA()()()()()}if(2&n){const t=l.$implicit,i=e.oxw(2);e.xp6(3),e.Oqu(t.key),e.xp6(2),e.Q6J("ngIf",i.getValueAlias(t.value)),e.xp6(2),e.Oqu(t.value),e.xp6(7),e.Oqu(e.lcZ(15,5,"Common.Edit")),e.xp6(5),e.Oqu(e.lcZ(20,7,"Common.Remove.Title"))}}function xe(n,l){if(1&n&&(e.TgZ(0,"table",26)(1,"thead")(2,"tr")(3,"th",27),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.TgZ(6,"th",28),e._uU(7),e.ALo(8,"translate"),e.qZA(),e.TgZ(9,"th",29)(10,"span",15),e._uU(11),e.ALo(12,"translate"),e.qZA()()()(),e.TgZ(13,"tbody"),e.YNc(14,Je,21,9,"tr",8),e.ALo(15,"keyvalue"),e.qZA()()),2&n){const t=e.oxw();e.xp6(4),e.Oqu(e.lcZ(5,4,"Clients.ClaimMappings.ClaimType")),e.xp6(3),e.Oqu(e.lcZ(8,6,"Clients.ClaimMappings.AssertionTypeHeading")),e.xp6(4),e.Oqu(e.lcZ(12,8,"Common.Actions")),e.xp6(3),e.Q6J("ngForOf",e.lcZ(15,10,t.claimMappings))}}function Ue(n,l){if(1&n){const t=e.EpF();e.TgZ(0,"tr")(1,"td",41),e.NdJ("click",function(){const s=e.CHM(t).$implicit,c=e.oxw();return e.KtG(c.updateValue(s.value))}),e.TgZ(2,"label",42)(3,"input",43),e.NdJ("change",function(){const s=e.CHM(t).$implicit,c=e.oxw();return e.KtG(c.updateValue(s.value))}),e.ALo(4,"translate"),e.qZA()()(),e.TgZ(5,"td",44),e.NdJ("click",function(){const s=e.CHM(t).$implicit,c=e.oxw();return e.KtG(c.updateValue(s.value))}),e.TgZ(6,"b",40),e._uU(7),e.ALo(8,"translate"),e.qZA(),e.TgZ(9,"span",45),e._uU(10),e.qZA()()()}if(2&n){const t=l.$implicit,i=e.oxw();e.xp6(3),e.Q6J("checked",t.value==i.addValue),e.uIk("aria-label",e.lcZ(4,4,"Common.Add")),e.xp6(4),e.Oqu(e.lcZ(8,6,"Clients.ClaimMappings.AssertionTypeValues."+t.key)),e.xp6(3),e.Oqu(t.value)}}function Le(n,l){if(1&n&&(e.TgZ(0,"option"),e._uU(1),e.qZA()),2&n){const t=l.$implicit;e.xp6(1),e.Oqu(t)}}function Ie(n,l){if(1&n){const t=e.EpF();e.TgZ(0,"tr")(1,"td",41),e.NdJ("click",function(){const s=e.CHM(t).$implicit,c=e.oxw();return e.KtG(c.updateEditValue(s.value))}),e.TgZ(2,"label",42)(3,"input",43),e.NdJ("change",function(){const s=e.CHM(t).$implicit,c=e.oxw();return e.KtG(c.updateEditValue(s.value))}),e.ALo(4,"translate"),e.qZA()()(),e.TgZ(5,"td",44),e.NdJ("click",function(){const s=e.CHM(t).$implicit,c=e.oxw();return e.KtG(c.updateEditValue(s.value))}),e.TgZ(6,"b",40),e._uU(7),e.ALo(8,"translate"),e.qZA(),e.TgZ(9,"span",45),e._uU(10),e.qZA()()()}if(2&n){const t=l.$implicit,i=e.oxw();e.xp6(3),e.Q6J("checked",t.value==i.editingMapping.value),e.uIk("aria-label",e.lcZ(4,4,"Common.Add")),e.xp6(4),e.Oqu(e.lcZ(8,6,"Clients.ClaimMappings.AssertionTypeValues."+t.key)),e.xp6(3),e.Oqu(t.value)}}class j{}let K=(()=>{class n{constructor(t,i,o,s,c,_){this.cache=t,this.claimTypesService=i,this.errorService=o,this.toast=s,this.translate=c,this.modalService=_,this.claimMappings=new Map,this.addType="",this.addValue="",this.editingMapping=new j,this.editModalActions=[v.n.Save],this.editModalId="editMappingModalId",this.editAssertionsModalActions=[v.n.Save],this.editAssertionsModalId="editAssertionsModalId",this.addModalActions=[v.n.Save],this.addModalId="addMappingModalId",this.addAssertionsModalActions=[v.n.Save],this.addAssertionsModalId="addAssertionsModalId"}ngOnInit(){this.cache.unsavedCache$.subscribe(t=>{this.relyingParty=t,this.claimMappings=new Map(t.claimMappings)}),this.claimTypesService.getClaimTypes().subscribe(t=>{this.avaliableClaimTypes=t.map(i=>i.name)},t=>{this.errorService.handleError(t)}),this.avaliableAssertionTypes=be.P.claimTypes}openAddModal(){this.modalService.showById(this.addModalId,this.addButtonRef)}openEditModal(t,i){const o=JSON.parse(JSON.stringify(t));this.editingMapping.type=t.key,this.editingMapping.value=t.value,this.editingMapping.oldMapping=o,this.editButton=i,this.modalService.showById(this.editModalId,i)}editMapping(){this.editingMapping.type!==this.editingMapping.oldMapping.key?(this.claimMappings.delete(this.editingMapping.oldMapping.key),this.claimMappings.set(this.editingMapping.type,this.editingMapping.value)):this.claimMappings.set(this.editingMapping.type,this.editingMapping.value),this.updateMappings()}resetAndCloseEditModal(){this.editingMapping=new j,this.editButton=null,this.modalService.hideById(this.editModalId)}displayEditAvaliableAssertionTypesModal(){this.modalService.hideById(this.editModalId),this.modalService.showById(this.editAssertionsModalId,this.addEditAssertionsButtonRef)}closeEditAvaliableAssertionTypesModal(){this.modalService.hideById(this.editAssertionsModalId),this.modalService.showById(this.editModalId,this.editButton)}cancelAdd(){this.clear(),this.modalService.hideById(this.addModalId)}addMapping(){if(void 0!==this.claimMappings.get(this.addType)){const t=this.translate.instant("Clients.ClaimMappings.ExisitingMappingWarning")+` ${this.addType}`;this.toast.warning(t,this.translate.instant("Common.Warning"))}else this.claimMappings.set(this.addType,this.addValue),this.updateMappings();this.closeAvaliableAssertionTypesModal(),this.cancelAdd()}removeMapping(t){this.claimMappings.delete(t),this.updateMappings()}updateMappings(){const t=this.relyingParty;t.claimMappings=this.claimMappings,this.cache.componentDirtyValidMap.set("ClaimsMapping",{isValid:!0}),this.cache.unsavedCache.next(t),this.clear()}displayAvaliableAssertionTypesModal(){this.modalService.hideById(this.addModalId),this.modalService.showById(this.addAssertionsModalId,this.addAssertionsButtonRef)}updateValue(t){this.addValue=t}updateEditValue(t){this.editingMapping.value=t}closeAvaliableAssertionTypesModal(){this.modalService.hideById(this.addAssertionsModalId),this.modalService.showById(this.addModalId,this.addButtonRef)}clear(){this.addType="",this.addValue=""}getValueAlias(t){for(const i of this.avaliableAssertionTypes)if(i[1]===t)return this.translate.instant("Clients.ClaimMappings.AssertionTypeValues."+i[0])}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(q.h),e.Y36(Se.M),e.Y36(I.T),e.Y36(M._W),e.Y36(d.sK),e.Y36(Z.Z))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-client-claimmappings"]],viewQuery:function(t,i){if(1&t&&(e.Gf(we,5),e.Gf(ye,5),e.Gf(Ae,5)),2&t){let o;e.iGM(o=e.CRH())&&(i.addEditAssertionsButtonRef=o.first),e.iGM(o=e.CRH())&&(i.addButtonRef=o.first),e.iGM(o=e.CRH())&&(i.addAssertionsButtonRef=o.first)}},decls:69,vars:70,consts:[["id","editClientClaims"],["right",""],[1,"tw-btn-success",3,"id","click"],["addButton",""],[3,"actions","title","modalId","addDisabled","onCancel","onSave"],[3,"id","label"],[1,"tw-form-select"],["id","client-claimmapping-type",1,"tw-form-control",3,"ngModel","ngModelChange"],[4,"ngFor","ngForOf"],[3,"id","label","isLast"],[1,"tw-flex","tw-w-full","lg:tw-max-w-2xl"],["id","client-claimmapping-map","type","text","maxlength","250",1,"tw-form-control","tw-rounded-r-none","tw-border-r-0",3,"ngModel","ngModelChange"],[1,"tw-btn","tw-rounded-l-none",3,"click"],["addAvailableAssertionsButton",""],["aria-hidden","true",1,"far","fa-plus"],[1,"sr-only"],["class","tw-alert","role","alert",4,"ngIf"],["class","datatable hover tw-mb-4",4,"ngIf"],[3,"actions","title","modalId","addDisabled","saveText","onCancel","onSave"],[1,"datatable","selectable","hover"],[1,"toggle","tw-w-1"],["id","edit-client-claimmapping-type",1,"tw-form-control",3,"ngModel","ngModelChange"],["id","edit-client-claimmapping-map","type","text","maxlength","250",1,"tw-form-control","tw-rounded-r-none","tw-border-r-0",3,"ngModel","ngModelChange"],["addEditAvailableAssertionsButton",""],["role","alert",1,"tw-alert"],["id","noClaimMappingsLabel"],[1,"datatable","hover","tw-mb-4"],[1,"sm:tw-w-1/3"],[1,"tw-hidden","sm:tw-table-cell"],[1,"tw-w-1"],[1,"tw-max-w-0","tw-truncate"],[1,"tw-hidden","tw-max-w-0","tw-truncate","sm:tw-table-cell"],["class","tw-block tw-truncate",4,"ngIf"],[1,"tw-text-grey-800"],[1,"tw-flex","tw-items-center"],["id","selectButton",1,"tw-btn-link","tw-btn-small",3,"click"],["editButton",""],["aria-hidden","true",1,"fad","fa-pencil"],[1,"tw-btn-link","tw-btn-small","tw-text-red-500",3,"click"],["aria-hidden","true",1,"fas","fa-times"],[1,"tw-block","tw-truncate"],[1,"toggle","tw-w-1",3,"click"],[1,"toggle-label"],["type","radio",1,"tw-block","tw-cursor-pointer",3,"checked","change"],[1,"tw-max-w-0","tw-truncate",3,"click"],[1,"tw-text-xs","tw-text-grey-700"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"app-action-bar"),e.ynx(2,1),e.TgZ(3,"button",2,3),e.NdJ("click",function(){return i.openAddModal()}),e._uU(5),e.ALo(6,"translate"),e.qZA(),e.BQk(),e.qZA(),e.TgZ(7,"app-custom-modal",4),e.NdJ("onCancel",function(){return i.cancelAdd()})("onSave",function(){return i.addMapping()}),e.TgZ(8,"app-form-row",5)(9,"div",6)(10,"select",7),e.NdJ("ngModelChange",function(s){return i.addType=s}),e._UZ(11,"option"),e.YNc(12,Me,2,1,"option",8),e.qZA()()(),e.TgZ(13,"app-form-row",9)(14,"div",10)(15,"input",11),e.NdJ("ngModelChange",function(s){return i.addValue=s}),e.qZA(),e.TgZ(16,"button",12,13),e.NdJ("click",function(){return i.displayAvaliableAssertionTypesModal()}),e._UZ(18,"span",14),e.TgZ(19,"span",15),e._uU(20),e.ALo(21,"translate"),e.qZA()()()()(),e.YNc(22,Ze,4,3,"div",16),e.YNc(23,xe,16,12,"table",17),e.qZA(),e.TgZ(24,"app-custom-modal",18),e.NdJ("onCancel",function(){return i.closeAvaliableAssertionTypesModal()})("onSave",function(){return i.closeAvaliableAssertionTypesModal()}),e.TgZ(25,"table",19)(26,"thead",15)(27,"tr")(28,"th",20)(29,"span",15),e._uU(30),e.ALo(31,"translate"),e.qZA()(),e.TgZ(32,"th"),e._uU(33),e.ALo(34,"translate"),e.ALo(35,"translate"),e.qZA()()(),e.TgZ(36,"tbody"),e.YNc(37,Ue,11,8,"tr",8),e.ALo(38,"keyvalue"),e.qZA()()(),e.TgZ(39,"app-custom-modal",4),e.NdJ("onCancel",function(){return i.resetAndCloseEditModal()})("onSave",function(){return i.editMapping()}),e.TgZ(40,"app-form-row",5)(41,"div",6)(42,"select",21),e.NdJ("ngModelChange",function(s){return i.editingMapping.type=s}),e._UZ(43,"option"),e.YNc(44,Le,2,1,"option",8),e.qZA()()(),e.TgZ(45,"app-form-row",9)(46,"div",10)(47,"input",22),e.NdJ("ngModelChange",function(s){return i.editingMapping.value=s}),e.qZA(),e.TgZ(48,"button",12,23),e.NdJ("click",function(){return i.displayEditAvaliableAssertionTypesModal()}),e._UZ(50,"span",14),e.TgZ(51,"span",15),e._uU(52),e.ALo(53,"translate"),e.qZA()()()()(),e.TgZ(54,"app-custom-modal",18),e.NdJ("onCancel",function(){return i.closeEditAvaliableAssertionTypesModal()})("onSave",function(){return i.closeEditAvaliableAssertionTypesModal()}),e.TgZ(55,"table",19)(56,"thead",15)(57,"tr")(58,"th",20)(59,"span",15),e._uU(60),e.ALo(61,"translate"),e.qZA()(),e.TgZ(62,"th"),e._uU(63),e.ALo(64,"translate"),e.ALo(65,"translate"),e.qZA()()(),e.TgZ(66,"tbody"),e.YNc(67,Ie,11,8,"tr",8),e.ALo(68,"keyvalue"),e.qZA()()()),2&t&&(e.xp6(3),e.Q6J("id","addMappingButton"),e.xp6(2),e.hij(" ",e.lcZ(6,48,"Clients.Saml.AddClaimMapping")," "),e.xp6(2),e.Q6J("actions",i.addModalActions)("title","Clients.Saml.AddClaimMapping")("modalId",i.addModalId)("addDisabled",i.addType.length<1||i.addValue.length<1),e.xp6(1),e.Q6J("id","mappingType")("label","Clients.ClaimMappings.ClaimType"),e.xp6(2),e.Q6J("ngModel",i.addType),e.xp6(2),e.Q6J("ngForOf",i.avaliableClaimTypes),e.xp6(1),e.Q6J("id","client-claimmapping-map")("label","Clients.ClaimMappings.AssertionTypeHeading")("isLast",!0),e.xp6(2),e.Q6J("ngModel",i.addValue),e.xp6(5),e.Oqu(e.lcZ(21,50,"Clients.ClaimMappings.AssertionTypeSearch")),e.xp6(2),e.Q6J("ngIf",i.claimMappings.size<1),e.xp6(1),e.Q6J("ngIf",i.claimMappings.size>0),e.xp6(1),e.Q6J("actions",i.addAssertionsModalActions)("title","Clients.ClaimMappings.AssertionTypeHeading")("modalId",i.addAssertionsModalId)("addDisabled",""==i.addValue)("saveText","Common.Add"),e.xp6(6),e.Oqu(e.lcZ(31,52,"Common.Add")),e.xp6(3),e.AsE(" ",e.lcZ(34,54,"Clients.ClaimMappings.AssertionTypeAlias")," / ",e.lcZ(35,56,"Clients.ClaimMappings.AssertionTypeValue")," "),e.xp6(4),e.Q6J("ngForOf",e.lcZ(38,58,i.avaliableAssertionTypes)),e.xp6(2),e.Q6J("actions",i.editModalActions)("title","Clients.Saml.EditClaimMapping")("modalId",i.editModalId)("addDisabled",(null==i.editingMapping.type?null:i.editingMapping.type.length)<1||(null==i.editingMapping.value?null:i.editingMapping.value.length)<1),e.xp6(1),e.Q6J("id","editMappingType")("label","Clients.ClaimMappings.ClaimType"),e.xp6(2),e.Q6J("ngModel",i.editingMapping.type),e.xp6(2),e.Q6J("ngForOf",i.avaliableClaimTypes),e.xp6(1),e.Q6J("id","edit-client-claimmapping-map")("label","Clients.ClaimMappings.AssertionTypeHeading")("isLast",!0),e.xp6(2),e.Q6J("ngModel",i.editingMapping.value),e.xp6(5),e.Oqu(e.lcZ(53,60,"Clients.ClaimMappings.AssertionTypeSearch")),e.xp6(2),e.Q6J("actions",i.editAssertionsModalActions)("title","Clients.ClaimMappings.AssertionTypeHeading")("modalId",i.editAssertionsModalId)("addDisabled",""==i.editingMapping.value)("saveText","Common.Add"),e.xp6(6),e.Oqu(e.lcZ(61,62,"Common.Add")),e.xp6(3),e.AsE(" ",e.lcZ(64,64,"Clients.ClaimMappings.AssertionTypeAlias")," / ",e.lcZ(65,66,"Clients.ClaimMappings.AssertionTypeValue")," "),e.xp6(4),e.Q6J("ngForOf",e.lcZ(68,68,i.avaliableAssertionTypes)))},dependencies:[g.sg,g.O5,a.YN,a.Kr,a.Fj,a.EJ,a.JJ,a.nD,a.On,u.L,w.K,k.R,d.X$,g.Nd],encapsulation:2}),n})();var N=r(9537);const Re=["addButton"];let Pe=(()=>{class n{constructor(t,i,o){this.clientCachingService=t,this.modalService=i,this.dataTableService=o,this.addType="",this.addValue="",this.editingClaim=new N.$,this.editModalActions=[v.n.Save],this.editModalId="editClaimId",this.claimDataTableActions=[C.Xz.Delete,C.Xz.Select],this.addModalActions=[v.n.Save],this.addModalId="addClaimModalId"}ngOnInit(){this.subscription=this.clientCachingService.unsavedCache$.subscribe(t=>{this.client=JSON.parse(JSON.stringify(t)),this.claims=this.client.claims,this.alwaysSendClaims=t.alwaysSendClientClaims,this.prefixClaims=t.clientClaimsPrefix}),this.subscription.add(this.dataTableService.deleteRowEvent.subscribe(t=>{this.deleteClaim(t)}))}ngOnDestroy(){this.subscription.unsubscribe()}openAddModal(){this.modalService.showById(this.addModalId,this.addButtonRef)}openEditModal(t){this.editingClaim=JSON.parse(JSON.stringify(t.data)),this.editingClaim.oldClaimIndex=this.claims.indexOf(t.data),this.modalService.showById(this.editModalId,t.element)}resetAndCloseEditModal(){this.editingClaim=new N.$,this.modalService.hideById(this.editModalId)}cancelAdd(){this.addType="",this.addValue="",this.modalService.hideById(this.addModalId)}editClaim(){const t=this.claims.slice(),i=t[this.editingClaim.oldClaimIndex];i.value=this.editingClaim.value,i.type=this.editingClaim.type,this.submitClaims(t),this.resetAndCloseEditModal()}addClaim(){const t=new N.o;t.type=this.addType.trim(),t.value=this.addValue.trim();const i=this.claims.slice();i.push(t),this.addType="",this.addValue="",this.submitClaims(i)}deleteClaim(t){const i=this.claims.slice();i.splice(t,1),this.submitClaims(i)}sendBooleans(){const t=JSON.parse(JSON.stringify(this.client));t.alwaysSendClientClaims=this.alwaysSendClaims,t.prefixClientClaims=this.prefixClaims,this.submitClient(t)}submitClaims(t){const i=JSON.parse(JSON.stringify(this.client));i.claims=t,this.client.claims=t,this.submitClient(i)}submitClient(t){this.clientCachingService.componentDirtyValidMap.set("ClientClaimsComponent",{isValid:!0}),this.clientCachingService.unsavedCache.next(t)}updatePrefix(){const t=JSON.parse(JSON.stringify(this.client));t.clientClaimsPrefix=this.prefixClaims?this.prefixClaims:null,this.submitClient(t)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(m.Z),e.Y36(Z.Z),e.Y36(x.n))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-client-claims"]],viewQuery:function(t,i){if(1&t&&e.Gf(Re,5),2&t){let o;e.iGM(o=e.CRH())&&(i.addButtonRef=o.first)}},decls:27,vars:46,consts:[["id","editClientClaims"],["claimsForm","ngForm"],[3,"id","label","help"],[3,"id"],["id","alwaysSendClaims","name","alwaysSendClaims","type","checkbox",1,"tw-form-switch__input",3,"ngModel","change","ngModelChange"],["id","prefixClaims","name","prefixClaims","type","text",1,"tw-form-control",3,"ngModel","ngModelChange","keyup"],["right",""],[1,"tw-btn-success",3,"id","click"],["addButton",""],[3,"title","modalId","actions","addDisabled","onCancel","onSave"],[3,"label","id"],["id","addType","type","text",1,"tw-form-control","tw-max-w-full",3,"ngModel","ngModelChange"],[3,"label","id","isLast"],["id","addValue","type","text",1,"tw-form-control","tw-max-w-full",3,"ngModel","ngModelChange"],[3,"rows","norowslabel","actions","onSelect"],[3,"prop","title","headClasses","cellClasses"],["id","editType","type","text",1,"tw-form-control","tw-max-w-full",3,"ngModel","ngModelChange"],["id","editValue","type","text",1,"tw-form-control","tw-max-w-full",3,"ngModel","ngModelChange"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"form",null,1)(3,"app-form-row",2)(4,"app-form-toggle",3)(5,"input",4),e.NdJ("change",function(){return i.sendBooleans()})("ngModelChange",function(s){return i.alwaysSendClaims=s}),e.qZA()()(),e.TgZ(6,"app-form-row",2)(7,"input",5),e.NdJ("ngModelChange",function(s){return i.prefixClaims=s})("keyup",function(){return i.updatePrefix()}),e.qZA()()(),e.TgZ(8,"app-action-bar"),e.ynx(9,6),e.TgZ(10,"button",7,8),e.NdJ("click",function(){return i.openAddModal()}),e._uU(12),e.ALo(13,"translate"),e.qZA(),e.BQk(),e.qZA(),e.TgZ(14,"app-custom-modal",9),e.NdJ("onCancel",function(){return i.cancelAdd()})("onSave",function(){return i.addClaim()}),e.TgZ(15,"app-form-row",10)(16,"input",11),e.NdJ("ngModelChange",function(s){return i.addType=s}),e.qZA()(),e.TgZ(17,"app-form-row",12)(18,"input",13),e.NdJ("ngModelChange",function(s){return i.addValue=s}),e.qZA()()(),e.TgZ(19,"app-data-table",14),e.NdJ("onSelect",function(s){return i.openEditModal(s)}),e._UZ(20,"app-data-table-column",15)(21,"app-data-table-column",15),e.qZA(),e.TgZ(22,"app-custom-modal",9),e.NdJ("onCancel",function(){return i.resetAndCloseEditModal()})("onSave",function(){return i.editClaim()}),e.TgZ(23,"app-form-row",10)(24,"input",16),e.NdJ("ngModelChange",function(s){return i.editingClaim.type=s}),e.qZA()(),e.TgZ(25,"app-form-row",12)(26,"input",17),e.NdJ("ngModelChange",function(s){return i.editingClaim.value=s}),e.qZA()()()()),2&t&&(e.xp6(3),e.Q6J("id","alwaysSendClaims")("label","Clients.SendClaims")("help","Clients.SendClaimsHelp"),e.xp6(1),e.Q6J("id","alwaysSendClaims"),e.xp6(1),e.Q6J("ngModel",i.alwaysSendClaims),e.xp6(1),e.Q6J("id","prefixClaims")("label","Clients.PrefixClaims")("help","Clients.PrefixClaimsHelp"),e.xp6(1),e.Q6J("ngModel",i.prefixClaims),e.xp6(3),e.Q6J("id","addClaim"),e.xp6(2),e.hij(" ",e.lcZ(13,44,"Clients.AddClaim")," "),e.xp6(2),e.Q6J("title","Clients.AddClaim")("modalId",i.addModalId)("actions",i.addModalActions)("addDisabled",i.addType.length<1||i.addValue.length<1),e.xp6(1),e.Q6J("label","Common.Type")("id","addType"),e.xp6(1),e.Q6J("ngModel",i.addType),e.xp6(1),e.Q6J("label","Common.Value")("id","addValue")("isLast",!0),e.xp6(1),e.Q6J("ngModel",i.addValue),e.xp6(1),e.Q6J("rows",i.claims)("norowslabel","Clients.NoClaims")("actions",i.claimDataTableActions),e.xp6(1),e.Q6J("prop","type")("title","Common.Type")("headClasses","md:tw-w-1/3")("cellClasses","tw-max-w-0 tw-truncate"),e.xp6(1),e.Q6J("prop","value")("title","Common.Value")("headClasses","tw-hidden sm:tw-table-cell")("cellClasses","tw-hidden tw-max-w-0 tw-truncate sm:tw-table-cell"),e.xp6(1),e.Q6J("title","Clients.EditClaim")("modalId",i.editModalId)("actions",i.editModalActions)("addDisabled",(null==i.editingClaim.type?null:i.editingClaim.type.length)<1||(null==i.editingClaim.value?null:i.editingClaim.value.length)<1),e.xp6(1),e.Q6J("label","Common.Type")("id","editType"),e.xp6(1),e.Q6J("ngModel",i.editingClaim.type),e.xp6(1),e.Q6J("label","Common.Value")("id","editValue")("isLast",!0),e.xp6(1),e.Q6J("ngModel",i.editingClaim.value))},dependencies:[a._Y,a.Fj,a.Wl,a.JJ,a.JL,a.On,a.F,u.L,f.O,C.Qj,U.E,w.K,k.R,d.X$],encapsulation:2}),n})();var p=r(2329);let Qe=(()=>{class n{constructor(t,i,o){this.fb=t,this.clientViewService=i,this.clientCachingService=o}ngOnInit(){this.subscription=this.clientCachingService.unsavedCache$.pipe((0,h.P)()).subscribe(t=>{this.client=JSON.parse(JSON.stringify(t)),this.createForm()}),this.consentLifetimeButtons=[{duration:1,unit:p.f.Week},{duration:1,unit:p.f.Month},{duration:1,unit:p.f.Year},{duration:null,unit:p.f.Unlimited}]}ngAfterViewInit(){this.consentFormSubscription=this.consentForm.valueChanges.subscribe(t=>{this.clientCachingService.componentDirtyValidMap.set("ClientAdvancedConsentComponent",{isValid:this.consentForm.valid});const i=JSON.parse(JSON.stringify(this.client));i.logoUri=this.consentForm.controls.logoUri.value,i.clientUri=this.consentForm.controls.clientUri.value,i.requireConsent=this.consentForm.controls.requireConsent.value,i.allowRememberConsent=this.consentForm.controls.allowRememberConsent.value,i.consentLifetime=this.consentForm.controls.consentLifetime.value,this.clientCachingService.unsavedCache.next(i)})}ngOnDestroy(){this.consentFormSubscription.unsubscribe(),this.subscription.unsubscribe(),this.requireConsentSubscription.unsubscribe(),this.allowRememberConsentSubscription.unsubscribe()}createForm(){this.consentForm=this.fb.group({logoUri:[this.client.logoUri],clientUri:[this.client.clientUri],requireConsent:[this.client.requireConsent],allowRememberConsent:[{value:this.client.allowRememberConsent,disabled:!this.client.requireConsent}],consentLifetime:[{value:this.client.consentLifetime,disabled:!this.client.requireConsent||!this.client.allowRememberConsent},a.kI.min(0)]}),this.consentForm.markAsPristine(),this.requireConsentSubscription=this.consentForm.get("requireConsent").valueChanges.subscribe(t=>this.checkRequireConsentChange(t)),this.allowRememberConsentSubscription=this.consentForm.get("allowRememberConsent").valueChanges.subscribe(t=>this.checkAllowRememberConsentChange(t))}checkAllowRememberConsentChange(t){const i=this.consentForm.get("consentLifetime");t?i.enable():i.disable()}checkRequireConsentChange(t){const i=this.consentForm.get("consentLifetime"),o=this.consentForm.get("allowRememberConsent");t?o.enable():o.disable(),t&&o.value?i.enable():i.disable()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(a.QS),e.Y36(T.a),e.Y36(m.Z))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-client-consent"]],decls:13,vars:21,consts:[["id","clientConsent",3,"formGroup"],[3,"id","label","help"],["id","Domain","type","text","name","Domain","formControlName","clientUri",1,"tw-form-control"],["type","text","name","LogoUrl","id","LogoUrl","formControlName","logoUri",1,"tw-form-control"],[3,"id"],["id","requireConsent","type","checkbox","name","requireConsent","formControlName","requireConsent",1,"tw-form-switch__input"],["id","allowRememberConsent","type","checkbox","name","allowRememberConsent","formControlName","allowRememberConsent",1,"tw-form-switch__input"],[3,"id","label","help","isLast"],["id","consentLifetime","formControlName","consentLifetime",3,"buttons","allowUnlimited"]],template:function(t,i){1&t&&(e.TgZ(0,"form",0)(1,"app-form-row",1),e._UZ(2,"input",2),e.qZA(),e.TgZ(3,"app-form-row",1),e._UZ(4,"input",3),e.qZA(),e.TgZ(5,"app-form-row",1)(6,"app-form-toggle",4),e._UZ(7,"input",5),e.qZA()(),e.TgZ(8,"app-form-row",1)(9,"app-form-toggle",4),e._UZ(10,"input",6),e.qZA()(),e.TgZ(11,"app-form-row",7),e._UZ(12,"app-lifetime-picker",8),e.qZA()()),2&t&&(e.Q6J("formGroup",i.consentForm),e.xp6(1),e.Q6J("id","Domain")("label","Common.DisplayURL")("help","Clients.DisplayURLHelp"),e.xp6(2),e.Q6J("id","LogoUrl")("label","Common.LogoURL")("help","Clients.LogoURLHelp"),e.xp6(2),e.Q6J("id","requireConsent")("label","Clients.RequireConsent.Title")("help","Clients.RequireConsent.Help"),e.xp6(1),e.Q6J("id","requireConsent"),e.xp6(2),e.Q6J("id","allowRememberConsent")("label","Clients.AllowRememberConsent.Title")("help","Clients.AllowRememberConsent.Help"),e.xp6(1),e.Q6J("id","allowRememberConsent"),e.xp6(2),e.Q6J("id","consentLifetime")("label","Clients.Tokens.ConsentLifetime")("help","Clients.Tokens.LifetimeInSeconds")("isLast",!0),e.xp6(1),e.Q6J("buttons",i.consentLifetimeButtons)("allowUnlimited",!0))},dependencies:[a._Y,a.Fj,a.Wl,a.JJ,a.JL,a.sg,a.u,u.L,f.O,y.U],encapsulation:2}),n})();var Oe=r(9655),F=r(5150),J=r(9536),qe=r(2830),Ne=r(6252);const Fe=function(n){return[n]};let Ee=(()=>{class n{constructor(t,i,o,s,c,_){this.fb=t,this.clientViewService=i,this.clientCachingService=o,this.router=s,this.relyingPartyCachingService=c,this.serviceProviderCachingService=_}get ReadOnlyFieldType(){return Oe.O}ngOnInit(){this.takeClient(),this.routerSubscription=this.router.events.subscribe(t=>{t instanceof b.m2&&this.takeClient()})}takeClient(){this.clientCachingService.unsavedCache$.pipe((0,h.P)()).subscribe(t=>{this.client=t,this.createForm()})}ngAfterViewInit(){this.clientFormSubscription=this.clientForm.valueChanges.subscribe(t=>{this.clientCachingService.componentDirtyValidMap.set("ClientDetailsComponent",{isValid:this.clientForm.valid});const i=JSON.parse(JSON.stringify(this.client));i.clientId=this.clientForm.controls.clientId.value,i.description=this.clientForm.controls.description.value,i.clientName=this.clientForm.controls.clientName.value,i.enabled=this.clientForm.controls.enabled.value,this.clientCachingService.unsavedCache.next(i)})}ngOnDestroy(){this.clientFormSubscription.unsubscribe(),this.routerSubscription.unsubscribe()}createForm(){this.clientForm=this.fb.group({clientId:[this.client.clientId],clientName:[this.client.clientName,a.kI.required],enabled:[this.client.enabled],description:[this.client.description]}),this.clientForm.markAsPristine()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(a.QS),e.Y36(T.a),e.Y36(m.Z),e.Y36(b.F0),e.Y36(F.N),e.Y36(J.S))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-client-details"]],decls:11,vars:21,consts:[["id","editClientDetails",3,"formGroup"],[3,"id","label"],[3,"id","isTraffic"],["id","clientEnabled","type","checkbox","formControlName","enabled",1,"tw-form-switch__input"],[3,"id","label","help"],[1,"tw-h-full",3,"fieldType","values"],["type","text","name","DisplayName","id","clientName","formControlName","clientName",1,"tw-form-control"],[3,"id","label","help","isLast"],["id","clientDescription","formControlName","description",1,"tw-form-control"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"app-form-row",1)(2,"app-form-toggle",2),e._UZ(3,"input",3),e.qZA()(),e.TgZ(4,"app-form-row",4),e._UZ(5,"app-readonly",5),e.ALo(6,"readOnlyValue"),e.qZA(),e.TgZ(7,"app-form-row",4),e._UZ(8,"input",6),e.qZA(),e.TgZ(9,"app-form-row",7),e._UZ(10,"textarea",8),e.qZA()()),2&t&&(e.Q6J("formGroup",i.clientForm),e.xp6(1),e.Q6J("id","clientEnabled")("label","Common.Enabled"),e.xp6(1),e.Q6J("id","clientEnabled")("isTraffic",!0),e.xp6(2),e.Q6J("id","clientId")("label","Clients.ID")("help","Clients.IDHelp"),e.xp6(1),e.Q6J("fieldType",i.ReadOnlyFieldType.Single)("values",e.VKq(19,Fe,e.lcZ(6,17,i.client.clientId))),e.xp6(2),e.Q6J("id","clientName")("label","Common.DisplayName")("help","Clients.DisplayNameHelp"),e.xp6(2),e.Q6J("id","clientDescription")("label","Common.Description")("help","Clients.DescriptionHelp")("isLast",!0))},dependencies:[a.Fj,a.Wl,a.JJ,a.JL,a.sg,a.u,u.L,f.O,qe.f,Ne.b],encapsulation:2}),n})(),De=(()=>{class n{constructor(t,i,o){this.fb=t,this.clientViewService=i,this.clientCachingService=o}ngOnInit(){this.subscription=this.clientCachingService.unsavedCache$.pipe((0,h.P)()).subscribe(t=>{this.client=JSON.parse(JSON.stringify(t)),this.createForm()}),this.setButtonModels()}createForm(){this.deviceFlowForm=this.fb.group({userCode:[this.client.userCodeType],deviceCodeLifetime:[this.client.deviceCodeLifetime,a.kI.min(0)]}),this.deviceFlowForm.markAsPristine()}setTokenTime(t,i){this.deviceFlowForm.controls[i].setValue(60*t),this.deviceFlowForm.markAsTouched(),this.deviceFlowForm.markAsDirty()}ngAfterViewInit(){this.deviceFlowFormSubscription=this.deviceFlowForm.valueChanges.subscribe(t=>{const i=JSON.parse(JSON.stringify(this.client));i.deviceCodeLifetime=this.deviceFlowForm.controls.deviceCodeLifetime.value,i.userCode=""===this.deviceFlowForm.controls.userCode.value?null:this.deviceFlowForm.controls.userCode.value,i.userCodeType=(0,S.hr)(this.deviceFlowForm.controls.userCode.value)?null:this.deviceFlowForm.controls.userCode.value,this.clientCachingService.componentDirtyValidMap.set("ClientDeviceFlowComponent",{isValid:this.deviceFlowForm.valid}),this.clientCachingService.unsavedCache.next(i)})}ngOnDestroy(){this.deviceFlowFormSubscription.unsubscribe(),this.subscription.unsubscribe()}setButtonModels(){this.deviceCodeLifetimeButtons=[{duration:5,unit:p.f.Minutes},{duration:10,unit:p.f.Minutes}]}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(a.QS),e.Y36(T.a),e.Y36(m.Z))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-client-device-flow"]],decls:5,vars:9,consts:[[3,"formGroup"],[3,"id","label","help"],["id","deviceCodeLifetime","formControlName","deviceCodeLifetime",3,"buttons"],[3,"id","label","help","isLast"],["id","UserCode","type","text","formControlName","userCode",1,"tw-form-control"]],template:function(t,i){1&t&&(e.TgZ(0,"form",0)(1,"app-form-row",1),e._UZ(2,"app-lifetime-picker",2),e.qZA(),e.TgZ(3,"app-form-row",3),e._UZ(4,"input",4),e.qZA()()),2&t&&(e.Q6J("formGroup",i.deviceFlowForm),e.xp6(1),e.Q6J("id","deviceCodeLifetime")("label","Clients.Tokens.DeviceCodeLifetime")("help","Clients.Tokens.LifetimeInSeconds"),e.xp6(1),e.Q6J("buttons",i.deviceCodeLifetimeButtons),e.xp6(1),e.Q6J("id","UserCode")("label","Clients.Tokens.UserCode")("help","Clients.Tokens.UserCodeHelp")("isLast",!0))},dependencies:[a._Y,a.Fj,a.JJ,a.JL,a.sg,a.u,u.L,y.U],encapsulation:2}),n})();var R=(()=>{return(n=R||(R={}))[n.Custom=0]="Custom",n[n.Iat=1]="Iat",n[n.Nonce=2]="Nonce",n[n.IatAndNonce=3]="IatAndNonce",R;var n})(),Ve=r(1651),Be=r(9712);function Ge(n,l){if(1&n){const t=e.EpF();e.TgZ(0,"div")(1,"app-form-row",6)(2,"app-row-bar",7)(3,"app-state-toggle",8),e.NdJ("newValue",function(o){e.CHM(t);const s=e.oxw(2);return e.KtG(s.updateValidationMode(o))}),e.qZA()()(),e.TgZ(4,"app-form-row",9),e._UZ(5,"app-lifetime-picker",10),e.qZA()()}if(2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("id","ValidationMode")("label","Clients.DPoP.ValidationMode.Label"),e.xp6(2),e.Q6J("id","ValidationMode")("options",t.options)("value",t.dpopForm.controls.validationMode.value),e.xp6(1),e.Q6J("id","clockSkew")("label","Clients.DPoP.ClockSkew.Label")("help","Clients.DPoP.ClockSkew.Help")("isLast",!0),e.xp6(1),e.Q6J("buttons",t.skewButtons)}}function Ye(n,l){if(1&n&&(e.TgZ(0,"div",1)(1,"app-form-row",2)(2,"app-form-toggle",3),e._UZ(3,"input",4),e.qZA()(),e.YNc(4,Ge,6,10,"div",5),e.qZA()),2&n){const t=e.oxw();e.Q6J("formGroup",t.dpopForm),e.xp6(1),e.Q6J("id","RequireDPoP")("label","Common.Required")("isLast",!t.client.requireDPoP),e.xp6(1),e.Q6J("id","requireDPoP")("isTraffic",!0),e.xp6(2),e.Q6J("ngIf",t.client.requireDPoP)}}let He=(()=>{class n{constructor(t,i){this.fb=t,this.clientService=i,this.options=Object.keys(R).filter(o=>isNaN(Number(o))),this.skewButtons=[{duration:2,unit:p.f.Minutes},{duration:5,unit:p.f.Minutes},{duration:10,unit:p.f.Minutes}]}ngOnInit(){this.clientService.unsavedCache$.subscribe(t=>{this.client=t,this.buildForm()})}ngOnDestroy(){this.formUpdate.unsubscribe()}buildForm(){this.dpopForm=this.fb.group({requireDPoP:[this.client.requireDPoP,[]],validationMode:[this.client.dPoPValidationMode,[]],clockSkew:[this.client.dPoPClockSkew,[a.kI.required,a.kI.min(0)]]}),this.formUpdate=this.dpopForm.valueChanges.subscribe(t=>{if(this.clientService.componentDirtyValidMap.set("ClientTokensComponent",{isValid:this.dpopForm.valid}),!this.dpopForm.valid)return;let i={...this.client,requireDPoP:t.requireDPoP,dPoPValidationMode:t.validationMode,dPoPClockSkew:t.clockSkew};this.clientService.unsavedCache.next(i)})}updateValidationMode(t){this.dpopForm.get("validationMode").setValue(t)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(a.QS),e.Y36(m.Z))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-client-dpop"]],decls:1,vars:1,consts:[["id","editClientDPoP",3,"formGroup",4,"ngIf"],["id","editClientDPoP",3,"formGroup"],[3,"id","label","isLast"],[3,"id","isTraffic"],["id","requireDPoP","type","checkbox","formControlName","requireDPoP",1,"tw-form-switch__input"],[4,"ngIf"],[3,"id","label"],[1,"tw-form-input"],["left","",3,"id","options","value","newValue"],[3,"id","label","help","isLast"],["id","clockSkew","formControlName","clockSkew",3,"buttons"]],template:function(t,i){1&t&&e.YNc(0,Ye,5,7,"div",0),2&t&&e.Q6J("ngIf",i.dpopForm)},dependencies:[g.O5,a.Wl,a.JJ,a.JL,a.sg,a.u,u.L,f.O,Ve.T,y.U,Be._],encapsulation:2}),n})();const $e=["addButton"];let je=(()=>{class n{constructor(t,i,o,s,c){this.clientCachingService=t,this.translate=i,this.toastr=o,this.modalService=s,this.dataTableService=c,this.defaultGrantTypes=["implicit","authorization_code","hybrid","resource_owner","client_credentials","urn:ietf:params:oauth:grant-type:device_code","urn:openid:params:grant-type:ciba"],this.grantTypesList=[],this.grantsMap=this.createAllowedGrantsMap(),this.disabledSave=!0,this.grantTypeDataTableActions=[C.Xz.Delete],this.addModalActions=[v.n.Save],this.addModalId="addGrantTypeId"}ngOnInit(){this.subscription=this.clientCachingService.unsavedCache$.subscribe(t=>{this.client=JSON.parse(JSON.stringify(t)),this.grantTypesList=this.client.allowedGrantTypes.slice(),this.mapAllowedGrants()}),this.subscription.add(this.dataTableService.deleteRowEvent.subscribe(t=>{this.removeGrantType(t)}))}openAddModal(){this.reset(),this.modalService.showById(this.addModalId,this.addButtonRef)}cancelAdd(){this.modalService.hideById(this.addModalId)}reset(){this.newGrantType="",this.customGrantType=""}mapAllowedGrants(){const t=this.checkAllowed(["implicit","authorization_code","hybrid","urn:ietf:params:oauth:grant-type:device_code"]),i=this.checkAllowed(["implicit","authorization_code","hybrid","urn:ietf:params:oauth:grant-type:device_code"]),o=this.checkAllowed(["implicit","authorization_code","hybrid","urn:ietf:params:oauth:grant-type:device_code"]),s=this.checkAllowed(["client_credentials"]),c=this.checkAllowed(["password","urn:ietf:params:oauth:grant-type:device_code"]),_=this.checkAllowed(["password","implicit","authorization_code","hybrid","urn:ietf:params:oauth:grant-type:device_code"]),A=this.checkAllowed(["urn:openid:params:grant-type:ciba","implicit","authorization_code","hybrid","client_credentials","password","urn:ietf:params:oauth:grant-type:device_code"]);this.grantsMap.set("implicit",t),this.grantsMap.set("authorization_code",i),this.grantsMap.set("hybrid",o),this.grantsMap.set("client_credentials",s),this.grantsMap.set("password",c),this.grantsMap.set("urn:ietf:params:oauth:grant-type:device_code",_),this.grantsMap.set("urn:openid:params:grant-type:ciba",A)}createAllowedGrantsMap(){let t=new Map;return t=new Map,t.set("implicit",!1),t.set("authorization_code",!1),t.set("hybrid",!1),t.set("client_credentials",!1),t.set("password",!1),t.set("urn:ietf:params:oauth:grant-type:device_code",!1),t.set("urn:openid:params:grant-type:ciba",!1),t.set("custom",!1),t}ngOnDestroy(){this.subscription.unsubscribe()}checkAllowed(t){return(0,L.G)(this.client.allowedGrantTypes,i=>(0,L.r3)(t,i))}changeSelected(t){this.selected=t.value,this.evalidateDisabled()}addGrantType(){let t=this.selected;"custom"===t&&(t=this.customGrantType),this.grantTypesList.includes(t)?this.toastr.warning(this.translate.instant("Clients.GrantTypes.DuplicateGrantType"),this.translate.instant("Common.Warning")):(this.grantTypesList.push(t),this.updateClientCache())}removeGrantType(t){const i=this.grantTypesList[t];this.grantTypesList=this.grantTypesList.filter(o=>o!==i),this.updateClientCache()}updateClientCache(){const t=JSON.parse(JSON.stringify(this.client));t.allowedGrantTypes=this.grantTypesList,this.clientCachingService.componentDirtyValidMap.set("ClientGrantTypesComponent",{isValid:!0}),this.clientCachingService.unsavedCache.next(t)}evalidateDisabled(){this.disabledSave=!this.selected||"custom"===this.selected&&!(this.customGrantType&&this.customGrantType.length>1)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(m.Z),e.Y36(d.sK),e.Y36(M._W),e.Y36(Z.Z),e.Y36(x.n))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-client-granttypes"]],viewQuery:function(t,i){if(1&t&&e.Gf($e,5),2&t){let o;e.iGM(o=e.CRH())&&(i.addButtonRef=o.first)}},decls:40,vars:53,consts:[["id","editClientGrantTypes"],["right",""],[1,"tw-btn-success",3,"id","click"],["addButton",""],[3,"title","modalId","actions","addDisabled","onCancel","onSave"],[3,"label","id"],[1,"tw-form-select","tw-max-w-full"],["id","GrantSelect",1,"tw-form-control","tw-max-w-full",3,"ngModel","change","ngModelChange"],["value","implicit",3,"disabled"],["value","authorization_code",3,"disabled"],["value","hybrid",3,"disabled"],["value","client_credentials",3,"disabled"],["value","password",3,"disabled"],["value","urn:ietf:params:oauth:grant-type:device_code",3,"disabled"],["value","urn:openid:params:grant-type:ciba",3,"disabled"],["value","custom",3,"disabled"],[3,"label","id","isLast"],["id","GrantCustomValue","type","text","required","",1,"tw-form-control","tw-max-w-full",3,"ngModel","disabled","ngModelChange","keydown"],[3,"rows","norowslabel","actions"],[3,"prop","title","cellClasses"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"app-action-bar"),e.ynx(2,1),e.TgZ(3,"button",2,3),e.NdJ("click",function(){return i.openAddModal()}),e._uU(5),e.ALo(6,"translate"),e.qZA(),e.BQk(),e.qZA(),e.TgZ(7,"app-custom-modal",4),e.NdJ("onCancel",function(){return i.cancelAdd()})("onSave",function(){return i.addGrantType()}),e.TgZ(8,"app-form-row",5)(9,"div",6)(10,"select",7),e.NdJ("change",function(s){return i.changeSelected(s.target)})("ngModelChange",function(s){return i.newGrantType=s}),e._UZ(11,"option"),e.TgZ(12,"option",8),e._uU(13),e.ALo(14,"translate"),e.qZA(),e.TgZ(15,"option",9),e._uU(16),e.ALo(17,"translate"),e.qZA(),e.TgZ(18,"option",10),e._uU(19),e.ALo(20,"translate"),e.qZA(),e.TgZ(21,"option",11),e._uU(22),e.ALo(23,"translate"),e.qZA(),e.TgZ(24,"option",12),e._uU(25),e.ALo(26,"translate"),e.qZA(),e.TgZ(27,"option",13),e._uU(28),e.ALo(29,"translate"),e.qZA(),e.TgZ(30,"option",14),e._uU(31),e.ALo(32,"translate"),e.qZA(),e.TgZ(33,"option",15),e._uU(34),e.ALo(35,"translate"),e.qZA()()()(),e.TgZ(36,"app-form-row",16)(37,"input",17),e.NdJ("ngModelChange",function(s){return i.customGrantType=s})("keydown",function(){return i.evalidateDisabled()}),e.qZA()()(),e.TgZ(38,"app-data-table",18),e._UZ(39,"app-data-table-column",19),e.qZA()()),2&t&&(e.xp6(3),e.Q6J("id","addClaim"),e.xp6(2),e.hij(" ",e.lcZ(6,35,"Clients.GrantTypes.AddGrantType")," "),e.xp6(2),e.Q6J("title","Clients.GrantTypes.AddGrantType")("modalId",i.addModalId)("actions",i.addModalActions)("addDisabled",i.disabledSave),e.xp6(1),e.Q6J("label","Common.Name")("id","GrantSelect"),e.xp6(2),e.Q6J("ngModel",i.newGrantType),e.xp6(2),e.Q6J("disabled",i.grantsMap.get("implicit")),e.xp6(1),e.Oqu(e.lcZ(14,37,"Clients.GrantTypes.Implicit")),e.xp6(2),e.Q6J("disabled",i.grantsMap.get("authorization_code")),e.xp6(1),e.Oqu(e.lcZ(17,39,"Clients.GrantTypes.AuthCode")),e.xp6(2),e.Q6J("disabled",i.grantsMap.get("hybrid")),e.xp6(1),e.Oqu(e.lcZ(20,41,"Clients.GrantTypes.Hybrid")),e.xp6(2),e.Q6J("disabled",i.grantsMap.get("client_credentials")),e.xp6(1),e.Oqu(e.lcZ(23,43,"Clients.GrantTypes.ClientCredentials")),e.xp6(2),e.Q6J("disabled",i.grantsMap.get("password")),e.xp6(1),e.Oqu(e.lcZ(26,45,"Clients.GrantTypes.Password")),e.xp6(2),e.Q6J("disabled",i.grantsMap.get("urn:ietf:params:oauth:grant-type:device_code")),e.xp6(1),e.Oqu(e.lcZ(29,47,"Clients.GrantTypes.DeviceFlow")),e.xp6(2),e.Q6J("disabled",i.grantsMap.get("urn:openid:params:grant-type:ciba")),e.xp6(1),e.Oqu(e.lcZ(32,49,"Clients.GrantTypes.CIBA")),e.xp6(2),e.Q6J("disabled",i.grantsMap.get("custom")),e.xp6(1),e.Oqu(e.lcZ(35,51,"Clients.GrantTypes.Custom")),e.xp6(2),e.Q6J("label","Common.Custom")("id","GrantCustomValue")("isLast",!0),e.xp6(1),e.Q6J("ngModel",i.customGrantType)("disabled","custom"!=i.newGrantType),e.xp6(1),e.Q6J("rows",i.grantTypesList)("norowslabel","Clients.GrantTypes.None")("actions",i.grantTypeDataTableActions),e.xp6(1),e.Q6J("title","Common.Name")("cellClasses","tw-max-w-0 tw-truncate"))},dependencies:[a.YN,a.Kr,a.Fj,a.EJ,a.JJ,a.Q7,a.On,u.L,C.Qj,U.E,w.K,k.R,d.X$],encapsulation:2}),n})();const Ke=["addButton"];let ze=(()=>{class n{constructor(t,i,o,s,c){this.clientCachingService=t,this.translate=i,this.toastr=o,this.modalService=s,this.dataTableService=c,this._restrictions=[],this.addValue="",this.editValue="",this.addModalActions=[v.n.Save],this.addModalId="addProviderId",this.editModalActions=[v.n.Save],this.editModalId="editProviderId",this.dataTableActions=[C.Xz.Delete,C.Xz.Select]}set restrictions(t){this._restrictions=t||[]}get restrictions(){return this._restrictions}ngOnInit(){this.subscription=this.clientCachingService.unsavedCache$.subscribe(t=>{this.client=JSON.parse(JSON.stringify(t)),this.localLogin=t.enableLocalLogin,this.restrictions=t.identityProviderRestrictions.slice().sort()}),this.subscription.add(this.dataTableService.deleteRowEvent.subscribe(t=>{this.deleteRestrictions(t)}))}ngOnDestroy(){this.subscription.unsubscribe()}openAddModal(){this.modalService.showById(this.addModalId,this.addButtonRef)}cancelAdd(){this.addValue="",this.modalService.hideById(this.addModalId)}openEditModal(t){this.editValue=t.data,this.editIndex=this.restrictions.indexOf(t.data),this.modalService.showById(this.editModalId,t.element)}closeAndResetEditModal(){this.editValue="",this.editIndex=null,this.modalService.hideById(this.editModalId)}enableLocalLogin(){this.localLogin=!this.localLogin,this.submit()}deleteRestrictions(t){this.restrictions.splice(t,1),this.submit()}editRestriction(){this.restrictions[this.editIndex]=this.editValue,this.closeAndResetEditModal(),this.submit()}addRestriction(){const t=this.addValue.trim();this.restrictions.includes(t)?this.toastr.warning(this.translate.instant("Client.DuplicateProvider"),this.translate.instant("Notifications.Warning")):(this.restrictions.push(t),this.submit(),this.addValue="")}submit(){const t=JSON.parse(JSON.stringify(this.client));t.enableLocalLogin=this.localLogin,t.identityProviderRestrictions=this.restrictions,this.clientCachingService.componentDirtyValidMap.set("ClientRestrictionsComponent",{isValid:!0}),this.clientCachingService.unsavedCache.next(t)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(m.Z),e.Y36(d.sK),e.Y36(M._W),e.Y36(Z.Z),e.Y36(x.n))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-client-identity-providers"]],viewQuery:function(t,i){if(1&t&&e.Gf(Ke,5),2&t){let o;e.iGM(o=e.CRH())&&(i.addButtonRef=o.first)}},decls:19,vars:29,consts:[["id","editClientRestrictions"],[3,"id","label","help"],[3,"id"],["id","EnableLocalLogin","name","EnableLocalLogin","type","checkbox",1,"tw-form-switch__input",3,"checked","change"],["right",""],[1,"tw-btn-success",3,"id","click"],["addButton",""],[3,"title","modalId","actions","addDisabled","onCancel","onSave"],[3,"label","id","isLast"],["id","addValue","type","text","maxlength","200",1,"tw-form-control","tw-max-w-full",3,"ngModel","ngModelChange"],["id","restrictionsTable",3,"rows","norowslabel","actions","onSelect","onDelete"],[3,"prop","title"],["id","editValue","type","text",1,"tw-form-control","tw-max-w-full",3,"ngModel","ngModelChange"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"form")(2,"app-form-row",1)(3,"app-form-toggle",2)(4,"input",3),e.NdJ("change",function(){return i.enableLocalLogin()}),e.qZA()()()(),e.TgZ(5,"app-action-bar"),e.ynx(6,4),e.TgZ(7,"button",5,6),e.NdJ("click",function(){return i.openAddModal()}),e._uU(9),e.ALo(10,"translate"),e.qZA(),e.BQk(),e.qZA(),e.TgZ(11,"app-custom-modal",7),e.NdJ("onCancel",function(){return i.cancelAdd()})("onSave",function(){return i.addRestriction()}),e.TgZ(12,"app-form-row",8)(13,"input",9),e.NdJ("ngModelChange",function(s){return i.addValue=s}),e.qZA()()(),e.TgZ(14,"app-data-table",10),e.NdJ("onSelect",function(s){return i.openEditModal(s)})("onDelete",function(s){return i.deleteRestrictions(s)}),e._UZ(15,"app-data-table-column",11),e.qZA(),e.TgZ(16,"app-custom-modal",7),e.NdJ("onCancel",function(){return i.closeAndResetEditModal()})("onSave",function(){return i.editRestriction()}),e.TgZ(17,"app-form-row",8)(18,"input",12),e.NdJ("ngModelChange",function(s){return i.editValue=s}),e.qZA()()()()),2&t&&(e.xp6(2),e.Q6J("id","EnableLocalLogin")("label","Clients.EnableLocalLogin")("help","Clients.EnableLocalLoginHelp"),e.xp6(1),e.Q6J("id","EnableLocalLogin"),e.xp6(1),e.Q6J("checked",i.localLogin),e.xp6(3),e.Q6J("id","addProvider"),e.xp6(2),e.hij(" ",e.lcZ(10,27,"Clients.IdentityProviders.AddProvider")," "),e.xp6(2),e.Q6J("title","Clients.IdentityProviders.AddProvider")("modalId",i.addModalId)("actions",i.addModalActions)("addDisabled",""==i.addValue),e.xp6(1),e.Q6J("label","Clients.ProviderName")("id","addValue")("isLast",!0),e.xp6(1),e.Q6J("ngModel",i.addValue),e.xp6(1),e.Q6J("rows",i.restrictions)("norowslabel","Clients.NoRestrictions")("actions",i.dataTableActions),e.xp6(1),e.Q6J("title","Clients.ProviderName"),e.xp6(1),e.Q6J("title","Clients.IdentityProviders.EditProvider")("modalId",i.editModalId)("actions",i.editModalActions)("addDisabled",""==i.editValue),e.xp6(1),e.Q6J("label","Clients.ProviderName")("id","editValue")("isLast",!0),e.xp6(1),e.Q6J("ngModel",i.editValue))},dependencies:[a._Y,a.Fj,a.JJ,a.JL,a.nD,a.On,a.F,u.L,f.O,C.Qj,U.E,w.K,k.R,d.X$],encapsulation:2}),n})();var P=r(3435),Xe=r(8506),We=r(7733),et=r(9881),tt=r(8098);const it=["Picker"];function nt(n,l){1&n&&(e.TgZ(0,"div",3),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"Clients.ScopePickerSharedScopeWarning"),"\n"))}let z=(()=>{class n{constructor(t,i,o,s,c){this.clientCachingService=t,this.identityResourceService=i,this.protectedResourceService=o,this.activatedRoute=s,this.configService=c,this.availableResources=[],this.assignedResources=[],this.toSendResources=[]}ngOnInit(){this.configService.getConfig().pipe((0,h.P)()).subscribe(t=>{this.sharedScopesEnabled=t.featureFlagOptions.enableSharedScopes}),this.resourceType=this.activatedRoute.snapshot.data.resourceType,this.manageResourcesStreams(),this.clientCachingService.unsavedCache$.pipe((0,h.P)()).subscribe(t=>{this.client=JSON.parse(JSON.stringify(t))}),this.resourceType===P.P.Identity&&this.identityResourceService.getIdentityResources().subscribe(t=>{this.sortResources(t)}),this.resourceType===P.P.Protected&&this.protectedResourceService.getProtectedResources().subscribe(t=>{const i=[];t.slice().forEach(s=>{s.scopes.forEach(c=>{const _=i.findIndex(A=>A.name==c.name);-1!=_?(i[_].shared=!0,this.anySharedScopesInCollection=!0):i.push(c)})}),this.sortResources(i)})}manageResourcesStreams(){this.picker.assignedStream.subscribe(t=>{this.toSendResources=this.assignedResources.concat(t),this.assignClientScopes(t),this.assignedResources=this.toSendResources,this.availableResources=(0,S.mn)(this.availableResources.slice(),t),this.picker.availableCount=0}),this.picker.unAssignedStream.subscribe(t=>{this.toSendResources=(0,S.mn)(this.assignedResources,t),this.unAssignClientScopes(t),this.assignedResources=this.toSendResources.slice(),this.availableResources=this.availableResources.concat(t),this.picker.assignedCount=0})}sortResources(t){const i=[];this.client.allowedScopes.forEach(o=>{const s=t.findIndex(c=>c.name===o);s>=0&&(i.push(t[s]),t.splice(s,1))}),this.assignedResources=i,this.availableResources=t,this.toSendResources=i.slice()}assignClientScopes(t){const i=t.map(o=>o.name);this.client.allowedScopes=this.client.allowedScopes.concat(i),this.cacheClient(this.client)}unAssignClientScopes(t){t.forEach(i=>{const o=this.client.allowedScopes.indexOf(i.name);-1!==o&&this.client.allowedScopes.splice(o,1)}),this.cacheClient(this.client)}cacheClient(t){this.clientCachingService.componentDirtyValidMap.set("ClientResourcesComponent",{isValid:!0}),this.clientCachingService.unsavedCache.next(t)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(m.Z),e.Y36(Xe.Q),e.Y36(We.m),e.Y36(b.gz),e.Y36(et.E))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-client-manage-resources"]],viewQuery:function(t,i){if(1&t&&e.Gf(it,7),2&t){let o;e.iGM(o=e.CRH())&&(i.picker=o.first)}},decls:3,vars:5,consts:[[3,"availableInput","assignedInput","availableSearch","assignedSearch"],["Picker",""],["id","sharedScopeInformation","class","tw-alert-warning tw-mt-3","role","alert",4,"ngIf"],["id","sharedScopeInformation","role","alert",1,"tw-alert-warning","tw-mt-3"]],template:function(t,i){1&t&&(e._UZ(0,"app-common-picker",0,1),e.YNc(2,nt,3,3,"div",2)),2&t&&(e.Q6J("availableInput",i.availableResources)("assignedInput",i.assignedResources)("availableSearch",!0)("assignedSearch",!1),e.xp6(2),e.Q6J("ngIf",i.anySharedScopesInCollection))},dependencies:[g.O5,tt.v,d.X$],encapsulation:2}),n})();function ot(n,l){if(1&n&&(e.TgZ(0,"app-form-row",4),e._UZ(1,"app-lifetime-picker",5),e.qZA()),2&n){const t=e.oxw();e.Q6J("id","userSSOLifetime")("label","Clients.Tokens.UserSSOLifetime")("help","Clients.Tokens.UserSSOLifetimeHelp"),e.xp6(1),e.Q6J("buttons",t.userSSOLifetimeButtons)}}let st=(()=>{class n{constructor(t,i,o){this.fb=t,this.clientCachingService=i,this.clientViewService=o}ngOnInit(){this.subscription=this.clientCachingService.unsavedCache$.subscribe(t=>{this.client=JSON.parse(JSON.stringify(t)),void 0===this.otherForm&&this.createForm()}),this.setButtonModels()}ngOnDestroy(){this.subscription.unsubscribe()}setTokenTime(t,i){this.otherForm.controls[i].setValue(60*t),this.otherForm.markAsTouched(),this.otherForm.markAsDirty()}createForm(){this.otherForm=this.fb.group({userSSOLifetime:[this.client.userSSOLifetime],pairWiseSubjectSalt:[this.client.pairWiseSubjectSalt]}),this.otherForm.markAsPristine()}ngAfterViewInit(){this.otherForm.valueChanges.subscribe(t=>{const i=JSON.parse(JSON.stringify(this.client));i.userSSOLifetime=this.otherForm.controls.userSSOLifetime.value,i.pairWiseSubjectSalt=this.otherForm.controls.pairWiseSubjectSalt.value,this.clientCachingService.componentDirtyValidMap.set("ClientOtherComponent",{isValid:this.otherForm.valid}),this.clientCachingService.unsavedCache.next(i)})}setButtonModels(){this.userSSOLifetimeButtons=[{duration:1,unit:p.f.Hour},{duration:12,unit:p.f.Hours},{duration:1,unit:p.f.Day}]}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(a.QS),e.Y36(m.Z),e.Y36(T.a))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-client-other"]],decls:4,vars:6,consts:[[3,"formGroup"],[3,"id","label","help",4,"ngIf"],[3,"id","label","help","isLast"],["id","PairWiseSubjectSalt","type","text","formControlName","pairWiseSubjectSalt",1,"tw-form-control"],[3,"id","label","help"],["id","userSSOLifetime","formControlName","userSSOLifetime",3,"buttons"]],template:function(t,i){1&t&&(e.TgZ(0,"form",0),e.YNc(1,ot,2,4,"app-form-row",1),e.TgZ(2,"app-form-row",2),e._UZ(3,"input",3),e.qZA()()),2&t&&(e.Q6J("formGroup",i.otherForm),e.xp6(1),e.Q6J("ngIf",i.clientViewService.other.userSSOLifetime),e.xp6(1),e.Q6J("id","PairWiseSubjectSalt")("label","Clients.Tokens.PairWiseSubjectSalt")("help","Clients.Tokens.PairWiseSubjectSaltHelp")("isLast",!0))},dependencies:[g.O5,a._Y,a.Fj,a.JJ,a.JL,a.sg,a.u,u.L,y.U],encapsulation:2}),n})(),at=(()=>{class n{constructor(t,i,o){this.fb=t,this.clientViewService=i,this.clientCachingService=o}ngOnInit(){this.subscription=this.clientCachingService.unsavedCache$.pipe((0,h.P)()).subscribe(t=>{this.client=JSON.parse(JSON.stringify(t)),this.requirePkce=this.client.requirePkce,this.createForm()})}createForm(){this.pkceForm=this.fb.group({requirePkce:[this.client.requirePkce],allowPlainTextPkce:[{value:this.client.allowPlainTextPkce,disabled:!this.requirePkce}]}),this.pkceForm.markAsPristine()}ngAfterViewInit(){this.pkceFormSubscription=this.pkceForm.valueChanges.subscribe(t=>{this.requirePkce=t.requirePkce;const i=JSON.parse(JSON.stringify(this.client)),o=this.pkceForm.get("allowPlainTextPkce");this.requirePkce&&o.disabled?o.enable():!this.requirePkce&&!o.disabled&&o.disable(),i.requirePkce=this.pkceForm.controls.requirePkce.value,i.allowPlainTextPkce=this.pkceForm.controls.allowPlainTextPkce.value,this.clientCachingService.componentDirtyValidMap.set("ClientPKCEComponent",{isValid:this.pkceForm.valid}),this.clientCachingService.unsavedCache.next(i)})}ngOnDestroy(){this.pkceFormSubscription.unsubscribe(),this.subscription.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(a.QS),e.Y36(T.a),e.Y36(m.Z))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-client-pkce"]],decls:7,vars:10,consts:[[3,"formGroup"],[3,"id","label","help"],[3,"id"],["id","requirePkce","type","checkbox","formControlName","requirePkce",1,"tw-form-switch__input"],[3,"id","label","help","isLast"],["id","allowPlainTextPkce","type","checkbox","formControlName","allowPlainTextPkce",1,"tw-form-switch__input"]],template:function(t,i){1&t&&(e.TgZ(0,"form",0)(1,"app-form-row",1)(2,"app-form-toggle",2),e._UZ(3,"input",3),e.qZA()(),e.TgZ(4,"app-form-row",4)(5,"app-form-toggle",2),e._UZ(6,"input",5),e.qZA()()()),2&t&&(e.Q6J("formGroup",i.pkceForm),e.xp6(1),e.Q6J("id","requirePkce")("label","Clients.Tokens.RequirePkce")("help","Clients.Tokens.RequirePkceHelp"),e.xp6(1),e.Q6J("id","requirePkce"),e.xp6(2),e.Q6J("id","allowPlainTextPkce")("label","Clients.Tokens.AllowPlainTextPkce")("help","Clients.Tokens.AllowPlainTextPkceHelp")("isLast",!0),e.xp6(1),e.Q6J("id","allowPlainTextPkce"))},dependencies:[a._Y,a.Wl,a.JJ,a.JL,a.sg,a.u,u.L,f.O],encapsulation:2}),n})();var lt=r(6001);let rt=(()=>{class n{constructor(t){this.clientCachingService=t,this.properties=[]}ngOnInit(){this.subscription=this.clientCachingService.unsavedCache$.subscribe(t=>{this.client=JSON.parse(JSON.stringify(t)),this.properties=t.properties.sort()})}ngOnDestroy(){this.subscription.unsubscribe()}onPropertiesChanged(t){const i=JSON.parse(JSON.stringify(this.client));i.properties=t,this.clientCachingService.componentDirtyValidMap.set("ClientPropertiesComponent",{isValid:!0}),this.properties=t,this.clientCachingService.unsavedCache.next(i)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(m.Z))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-client-properties"]],decls:1,vars:2,consts:[[3,"modalId","properties","propertiesChanged"]],template:function(t,i){1&t&&(e.TgZ(0,"app-properties-editor",0),e.NdJ("propertiesChanged",function(s){return i.onPropertiesChanged(s)}),e.qZA()),2&t&&e.Q6J("modalId",i.client.id)("properties",i.client.properties)},dependencies:[lt.s],encapsulation:2}),n})();var ct=r(6519),X=r(6193);let pt=(()=>{class n{constructor(t,i,o){this.fb=t,this.clientCachingService=i,this.clientViewService=o,this.tokenUsage=ct.y}ngOnInit(){this.subscription=this.clientCachingService.unsavedCache$.subscribe(t=>{this.client=JSON.parse(JSON.stringify(t)),this.allowOfflineAccess=this.client.allowOfflineAccess,this.refreshExpiryType=this.client.refreshTokenExpiration,void 0===this.refreshTokensForm&&this.createForm()}),this.setButtonModels()}ngOnDestroy(){this.subscription.unsubscribe()}setTokenTime(t,i){this.refreshTokensForm.controls[i].setValue(60*t),this.refreshTokensForm.markAsTouched(),this.refreshTokensForm.markAsDirty()}createForm(){this.refreshTokensForm=this.fb.group({allowOfflineAccess:[this.client.allowOfflineAccess],updateAccessTokenClaimsOnRefresh:[this.client.updateAccessTokenClaimsOnRefresh],refreshTokenExpiration:[this.client.refreshTokenExpiration],absoluteRefreshTokenLifetime:[this.client.absoluteRefreshTokenLifetime,a.kI.min(0)],slidingRefreshTokenLifetime:[this.client.slidingRefreshTokenLifetime,a.kI.min(0)],refreshTokenUsage:[this.client.refreshTokenUsage]}),this.checkAllowOfflineAccess(),this.refreshTokensForm.markAsPristine()}ngAfterViewInit(){this.subscribeToFormChanges()}subscribeToFormChanges(){this.refreshTokensForm.valueChanges.subscribe(t=>{this.allowOfflineAccess!==t.allowOfflineAccess&&(this.allowOfflineAccess=t.allowOfflineAccess,this.checkAllowOfflineAccess()),this.refreshExpiryType!==t.refreshTokenExpiration&&(this.refreshExpiryType=t.refreshTokenExpiration,this.checkRefreshTokenExpiration());const i=JSON.parse(JSON.stringify(this.client));i.allowOfflineAccess=this.refreshTokensForm.controls.allowOfflineAccess.value,i.updateAccessTokenClaimsOnRefresh=this.refreshTokensForm.controls.updateAccessTokenClaimsOnRefresh.value,i.refreshTokenExpiration=this.refreshTokensForm.controls.refreshTokenExpiration.value,i.absoluteRefreshTokenLifetime=this.refreshTokensForm.controls.absoluteRefreshTokenLifetime.value,i.slidingRefreshTokenLifetime=this.refreshTokensForm.controls.slidingRefreshTokenLifetime.value,i.refreshTokenUsage=this.refreshTokensForm.controls.refreshTokenUsage.value,this.clientCachingService.componentDirtyValidMap.set("ClientRefreshTokensComponent",{isValid:this.refreshTokensForm.valid}),this.clientCachingService.unsavedCache.next(i)})}checkAllowOfflineAccess(){this.allowOfflineAccess?(this.refreshTokensForm.enable(),this.checkRefreshTokenExpiration()):(this.refreshTokensForm.disable(),this.refreshTokensForm.get("allowOfflineAccess").enable())}checkRefreshTokenExpiration(){if(!1===this.allowOfflineAccess)return;const t=this.refreshTokensForm.get("absoluteRefreshTokenLifetime"),i=this.refreshTokensForm.get("slidingRefreshTokenLifetime");this.refreshExpiryType===X.N.Absolute?(t.enable(),i.disable()):this.refreshExpiryType===X.N.Sliding&&(t.disable(),i.enable())}setButtonModels(){this.absoluteRefreshTokenLifetimeButtons=[{duration:1,unit:p.f.Day},{duration:15,unit:p.f.Days},{duration:30,unit:p.f.Days}],this.slidingRefreshTokenLifetimeButtons=[{duration:15,unit:p.f.Minutes},{duration:30,unit:p.f.Minutes},{duration:1,unit:p.f.Hour},{duration:5,unit:p.f.Hours}]}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(a.QS),e.Y36(m.Z),e.Y36(T.a))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-client-refresh-tokens"]],decls:41,vars:43,consts:[["id","editClientTokens",3,"formGroup"],[3,"id","label","help"],[3,"id"],["id","allowOfflineAccess","type","checkbox","formControlName","allowOfflineAccess",1,"tw-form-switch__input"],["id","updateAccessTokenClaimsOnRefresh","type","checkbox","formControlName","updateAccessTokenClaimsOnRefresh",1,"tw-form-switch__input"],[3,"label"],["role","group",1,"tw-form-checks"],[1,"tw-form-checks__item"],["for","refreshTokenExpirationAbsolute",1,"tw-form-checks__label"],["id","refreshTokenExpirationAbsolute","type","radio","name","refreshTokenExpiration","formControlName","refreshTokenExpiration",1,"tw-form-checks__input",3,"value"],["for","refreshTokenExpirationSliding",1,"tw-form-checks__label"],["id","refreshTokenExpirationSliding","type","radio","name","refreshTokenExpiration","formControlName","refreshTokenExpiration",1,"tw-form-checks__input",3,"value"],["id","absoluteRefreshTokenLifetime","formControlName","absoluteRefreshTokenLifetime",3,"buttons"],["id","slidingRefreshTokenLifetime","formControlName","slidingRefreshTokenLifetime",3,"buttons"],[3,"label","help","isLast"],["for","refreshTokenUsageOneTime",1,"tw-form-checks__label"],["id","refreshTokenUsageOneTime","type","radio","name","refreshTokenUsage","formControlName","refreshTokenUsage",1,"tw-form-checks__input",3,"value"],["for","refreshTokenUsageReuse",1,"tw-form-checks__label"],["id","refreshTokenUsageReuse","type","radio","name","refreshTokenUsage","formControlName","refreshTokenUsage",1,"tw-form-checks__input",3,"value"]],template:function(t,i){1&t&&(e.TgZ(0,"form",0)(1,"app-form-row",1)(2,"app-form-toggle",2),e._UZ(3,"input",3),e.qZA()(),e.TgZ(4,"app-form-row",1)(5,"app-form-toggle",2),e._UZ(6,"input",4),e.qZA()(),e.TgZ(7,"app-form-row",5)(8,"ul",6),e.ALo(9,"translate"),e.TgZ(10,"li",7)(11,"label",8),e._UZ(12,"input",9),e.TgZ(13,"span"),e._uU(14),e.ALo(15,"translate"),e.qZA()()(),e.TgZ(16,"li",7)(17,"label",10),e._UZ(18,"input",11),e.TgZ(19,"span"),e._uU(20),e.ALo(21,"translate"),e.qZA()()()()(),e.TgZ(22,"app-form-row",1),e._UZ(23,"app-lifetime-picker",12),e.qZA(),e.TgZ(24,"app-form-row",1),e._UZ(25,"app-lifetime-picker",13),e.qZA(),e.TgZ(26,"app-form-row",14)(27,"ul",6),e.ALo(28,"translate"),e.TgZ(29,"li",7)(30,"label",15),e._UZ(31,"input",16),e.TgZ(32,"span"),e._uU(33),e.ALo(34,"translate"),e.qZA()()(),e.TgZ(35,"li",7)(36,"label",17),e._UZ(37,"input",18),e.TgZ(38,"span"),e._uU(39),e.ALo(40,"translate"),e.qZA()()()()()()),2&t&&(e.Q6J("formGroup",i.refreshTokensForm),e.xp6(1),e.Q6J("id","allowOfflineAccess")("label","Clients.Tokens.AllowOfflineAccess")("help","Clients.Tokens.AllowOfflineAccessHelp"),e.xp6(1),e.Q6J("id","allowOfflineAccess"),e.xp6(2),e.Q6J("id","updateAccessTokenClaimsOnRefresh")("label","Clients.Tokens.UpdateAccessTokens")("help","Clients.Tokens.UpdateAccessTokensSummary"),e.xp6(1),e.Q6J("id","updateAccessTokenClaimsOnRefresh"),e.xp6(2),e.Q6J("label","Clients.Tokens.Expiration"),e.xp6(1),e.uIk("aria-label",e.lcZ(9,31,"Clients.Tokens.Expiration")),e.xp6(4),e.Q6J("value","Absolute"),e.xp6(2),e.Oqu(e.lcZ(15,33,"Clients.Tokens.Absolute")),e.xp6(4),e.Q6J("value","Sliding"),e.xp6(2),e.Oqu(e.lcZ(21,35,"Clients.Tokens.Sliding")),e.xp6(2),e.Q6J("id","absoluteRefreshTokenLifetime")("label","Clients.Tokens.RefreshTokenLifetime")("help","Clients.Tokens.LifetimeInSeconds"),e.xp6(1),e.Q6J("buttons",i.absoluteRefreshTokenLifetimeButtons),e.xp6(1),e.Q6J("id","slidingRefreshTokenLifetime")("label","Clients.Tokens.SlidingRefreshTokenLifetime")("help","Clients.Tokens.LifetimeInSeconds"),e.xp6(1),e.Q6J("buttons",i.slidingRefreshTokenLifetimeButtons),e.xp6(1),e.Q6J("label","Clients.Tokens.Refresh")("help","Clients.Tokens.RefreshHelp")("isLast",!0),e.xp6(1),e.uIk("aria-label",e.lcZ(28,37,"Clients.Tokens.Refresh")),e.xp6(4),e.Q6J("value",i.tokenUsage.OneTimeOnly),e.xp6(2),e.Oqu(e.lcZ(34,39,"Clients.Tokens.OneTime")),e.xp6(4),e.Q6J("value",i.tokenUsage.ReUse),e.xp6(2),e.Oqu(e.lcZ(40,41,"Clients.Tokens.ReUse")))},dependencies:[a._Y,a.Fj,a.Wl,a._,a.JJ,a.JL,a.sg,a.u,u.L,f.O,y.U,d.X$],encapsulation:2}),n})(),dt=(()=>{class n{constructor(t,i){this.cache=t,this.saml11="urn:oasis:names:tc:SAML:1.0:assertion",this.saml20="urn:oasis:names:tc:SAML:2.0:assertion",this.sha256Digest=["SHA256","http://www.w3.org/2001/04/xmlenc#sha256"],this.sha384Digest=["SHA384","http://www.w3.org/2001/04/xmldsig-more#sha384"],this.sha512Digest=["SHA512","http://www.w3.org/2001/04/xmlenc#sha512"],this.rsaSha256Signature=["RSA-SHA256","http://www.w3.org/2001/04/xmldsig-more#rsa-sha256"],this.rsaSha384Signature=["RSA-SHA384","http://www.w3.org/2001/04/xmldsig-more#rsa-sha384"],this.rsaSha512Signature=["RSA-SHA512","http://www.w3.org/2001/04/xmldsig-more#rsa-sha512"],this.defaultDiscriminator="",this.tokenType="",this.signatureAlg="",this.digestAlg="",this.samlNameIdFormat=""}ngOnInit(){this.cache.unsavedCache$.pipe((0,h.P)()).subscribe(t=>{this.relyingParty=t,this.tokenType=this.useValueOrDefault(t.tokenType),this.signatureAlg=this.useValueOrDefault(t.signatureAlgorithm),this.digestAlg=this.useValueOrDefault(t.digestAlgorithm),this.samlNameIdFormat=t.samlNameIdentifierFormat})}replaceDefault(t){return t===this.defaultDiscriminator?null:t}useValueOrDefault(t){return null!==t?t:this.defaultDiscriminator}updateRelyingPartyCache(){const t=this.relyingParty;t.tokenType=this.replaceDefault(this.tokenType),t.signatureAlgorithm=this.replaceDefault(this.signatureAlg),t.digestAlgorithm=this.replaceDefault(this.digestAlg),t.samlNameIdentifierFormat=this.samlNameIdFormat,this.cache.componentDirtyValidMap.set("RelyingPartyGeneral",{isValid:!0}),this.cache.unsavedCache.next(t)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(F.N),e.Y36(d.sK))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-client-relyingparty-general"]],decls:33,vars:27,consts:[[3,"id","label"],[1,"tw-form-select"],["id","partyTokenType",1,"tw-form-control",3,"ngModel","ngModelChange","change"],["value",""],[3,"value"],["id","partySignatureAlgorithm",1,"tw-form-control",3,"ngModel","ngModelChange","change"],["id","partyDigestAlgorithm",1,"tw-form-control",3,"ngModel","ngModelChange","change"],[3,"id","label","isLast"],["id","partyNameFormat","type","text",1,"tw-form-control",3,"ngModel","ngModelChange","change"]],template:function(t,i){1&t&&(e.TgZ(0,"app-form-row",0)(1,"div",1)(2,"select",2),e.NdJ("ngModelChange",function(s){return i.tokenType=s})("change",function(){return i.updateRelyingPartyCache()}),e.TgZ(3,"option",3),e._uU(4,"default"),e.qZA(),e.TgZ(5,"option",4),e._uU(6,"SAML 1.1"),e.qZA(),e.TgZ(7,"option",4),e._uU(8,"SAML 2.0"),e.qZA()()()(),e.TgZ(9,"app-form-row",0)(10,"div",1)(11,"select",5),e.NdJ("ngModelChange",function(s){return i.signatureAlg=s})("change",function(){return i.updateRelyingPartyCache()}),e.TgZ(12,"option",3),e._uU(13,"default"),e.qZA(),e.TgZ(14,"option",4),e._uU(15),e.qZA(),e.TgZ(16,"option",4),e._uU(17),e.qZA(),e.TgZ(18,"option",4),e._uU(19),e.qZA()()()(),e.TgZ(20,"app-form-row",0)(21,"div",1)(22,"select",6),e.NdJ("ngModelChange",function(s){return i.digestAlg=s})("change",function(){return i.updateRelyingPartyCache()}),e.TgZ(23,"option",3),e._uU(24,"default"),e.qZA(),e.TgZ(25,"option",4),e._uU(26),e.qZA(),e.TgZ(27,"option",4),e._uU(28),e.qZA(),e.TgZ(29,"option",4),e._uU(30),e.qZA()()()(),e.TgZ(31,"app-form-row",7)(32,"input",8),e.NdJ("ngModelChange",function(s){return i.samlNameIdFormat=s})("change",function(){return i.updateRelyingPartyCache()}),e.qZA()()),2&t&&(e.Q6J("id","partyTokenType")("label","Clients.RelyingParty.TokenType"),e.xp6(2),e.Q6J("ngModel",i.tokenType),e.xp6(3),e.s9C("value",i.saml11),e.xp6(2),e.s9C("value",i.saml20),e.xp6(2),e.Q6J("id","partySignatureAlgorithm")("label","Clients.RelyingParty.SignatureAlgorithm"),e.xp6(2),e.Q6J("ngModel",i.signatureAlg),e.xp6(3),e.s9C("value",i.rsaSha256Signature[1]),e.xp6(1),e.Oqu(i.rsaSha256Signature[0]),e.xp6(1),e.s9C("value",i.rsaSha384Signature[1]),e.xp6(1),e.Oqu(i.rsaSha384Signature[0]),e.xp6(1),e.s9C("value",i.rsaSha512Signature[1]),e.xp6(1),e.Oqu(i.rsaSha512Signature[0]),e.xp6(1),e.Q6J("id","partyDigestAlgorithm")("label","Clients.RelyingParty.DigestAlgorithm"),e.xp6(2),e.Q6J("ngModel",i.digestAlg),e.xp6(3),e.s9C("value",i.sha256Digest[1]),e.xp6(1),e.Oqu(i.sha256Digest[0]),e.xp6(1),e.s9C("value",i.sha384Digest[1]),e.xp6(1),e.Oqu(i.sha384Digest[0]),e.xp6(1),e.s9C("value",i.sha512Digest[1]),e.xp6(1),e.Oqu(i.sha512Digest[0]),e.xp6(1),e.Q6J("id","partyNameFormat")("label","Clients.RelyingParty.SAMLNameIdFormat")("isLast",!0),e.xp6(1),e.Q6J("ngModel",i.samlNameIdFormat))},dependencies:[a.YN,a.Kr,a.Fj,a.EJ,a.JJ,a.On,u.L],encapsulation:2}),n})();var E=r(6478),D=r(7073);let ut=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-client-relyingparty"]],features:[e._Bn([{provide:q.h,useExisting:F.N}])],decls:5,vars:5,consts:[[3,"pillMode"],[3,"tabTitle","tabValue"],["id","editClientRelyingParty"]],template:function(t,i){1&t&&(e.TgZ(0,"app-custom-tabs",0),e._UZ(1,"app-custom-tab",1)(2,"app-custom-tab",1),e.qZA(),e.TgZ(3,"div",2),e._UZ(4,"router-outlet"),e.qZA()),2&t&&(e.Q6J("pillMode",!0),e.xp6(1),e.Q6J("tabTitle","Clients.RelyingParty.General")("tabValue","general"),e.xp6(1),e.Q6J("tabTitle","Clients.ClaimMappings.Heading")("tabValue","claimmappings"))},dependencies:[b.lC,E.v,D.x],encapsulation:2}),n})();function mt(n,l){1&n&&e._UZ(0,"app-custom-tab",3),2&n&&e.Q6J("tabTitle","Nav.IdentityResources")("tabValue","identity")}function ht(n,l){1&n&&e._UZ(0,"app-custom-tab",3),2&n&&e.Q6J("tabTitle","Nav.ProtectedResources")("tabValue","protected")}let gt=(()=>{class n{constructor(t){this.clientViewService=t}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(T.a))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-client-resources"]],decls:5,vars:3,consts:[[3,"pillMode"],[3,"tabTitle","tabValue",4,"ngIf"],["id","editClientResources"],[3,"tabTitle","tabValue"]],template:function(t,i){1&t&&(e.TgZ(0,"app-custom-tabs",0),e.YNc(1,mt,1,2,"app-custom-tab",1),e.YNc(2,ht,1,2,"app-custom-tab",1),e.qZA(),e.TgZ(3,"div",2),e._UZ(4,"router-outlet"),e.qZA()),2&t&&(e.Q6J("pillMode",!0),e.xp6(1),e.Q6J("ngIf",i.clientViewService.resources.allowedScopesIdentity),e.xp6(1),e.Q6J("ngIf",i.clientViewService.resources.allowedScopesAPI))},dependencies:[b.lC,g.O5,E.v,D.x],encapsulation:2}),n})(),Ct=(()=>{class n{constructor(t){this.serviceProviderCache=t}ngOnInit(){this.serviceProviderCache.unsavedCache$.subscribe(t=>{this.serviceProvider=t})}updateCache(){this.serviceProviderCache.componentDirtyValidMap.set("ClientSamlAdvancedComponent",{isValid:!0}),this.serviceProviderCache.unsavedCache.next(this.serviceProvider)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(J.S))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-client-saml-advanced"]],decls:14,vars:20,consts:[[3,"id","label","help"],[3,"id"],["id","allowIdpInitiatedSso","type","checkbox",1,"tw-form-switch__input",3,"ngModel","ngModelChange","click"],[1,"tw-form-select"],["id","artifactDeliveryBindingType",1,"tw-form-control",3,"ngModel","ngModelChange","change"],["value","urn:oasis:names:tc:SAML:2.0:bindings:HTTP-POST"],["value","urn:oasis:names:tc:SAML:2.0:bindings:HTTP-Redirect"],[3,"id","label","help","isLast"],["type","text","id","nameIdentifierFormat",1,"tw-form-control",3,"ngModel","ngModelChange","change"]],template:function(t,i){1&t&&(e.TgZ(0,"app-form-row",0)(1,"app-form-toggle",1)(2,"input",2),e.NdJ("ngModelChange",function(s){return i.serviceProvider.allowIdpInitiatedSso=s})("click",function(){return i.updateCache()}),e.qZA()()(),e.TgZ(3,"app-form-row",0)(4,"div",3)(5,"select",4),e.NdJ("ngModelChange",function(s){return i.serviceProvider.artifactDeliveryBindingType=s})("change",function(){return i.updateCache()}),e.TgZ(6,"option",5),e._uU(7),e.ALo(8,"translate"),e.qZA(),e.TgZ(9,"option",6),e._uU(10),e.ALo(11,"translate"),e.qZA()()()(),e.TgZ(12,"app-form-row",7)(13,"input",8),e.NdJ("ngModelChange",function(s){return i.serviceProvider.nameIdentifierFormat=s})("change",function(){return i.updateCache()}),e.qZA()()),2&t&&(e.Q6J("id","allowIdpInitiatedSso")("label","Clients.Saml.AllowIdpInitiatedSso")("help","Clients.Saml.AllowIdpInitiatedSsoHelp"),e.xp6(1),e.Q6J("id","allowIdpInitiatedSso"),e.xp6(1),e.Q6J("ngModel",i.serviceProvider.allowIdpInitiatedSso),e.xp6(1),e.Q6J("id","artifactDeliveryBindingType")("label","Clients.Saml.ArtifactDeliveryBindingType")("help","Clients.Saml.ArtifactDeliveryBindingTypeHelp"),e.xp6(2),e.Q6J("ngModel",i.serviceProvider.artifactDeliveryBindingType),e.xp6(2),e.Oqu(e.lcZ(8,16,"Clients.Post")),e.xp6(3),e.Oqu(e.lcZ(11,18,"Clients.Redirect")),e.xp6(2),e.Q6J("id","nameIdentifierFormat")("label","Clients.Saml.NameIdentifierFormat")("help","Clients.Saml.NameIdentifierFormatHelp")("isLast",!0),e.xp6(1),e.Q6J("ngModel",i.serviceProvider.nameIdentifierFormat))},dependencies:[a.YN,a.Kr,a.Fj,a.Wl,a.EJ,a.JJ,a.On,u.L,f.O,d.X$],encapsulation:2}),n})();var V=r(3257),ft=r(5302),B=r(1339),W=r(964);const _t=["uploadCertModal"],vt=["fileInput"],Tt=function(){return{animated:!1,backdrop:"static"}};let ee=(()=>{class n{constructor(t,i,o,s,c){this.cache=t,this.certService=i,this.translate=o,this.toastr=s,this.errorService=c,this.metadata="",this.fileToUpload=null}ngOnInit(){this.cache.unsavedCache$.pipe((0,h.P)()).subscribe(t=>{this.id=t.id})}handleFileInput(t){this.fileToUpload=t.item(0)}save(){if((0,S.hr)(this.metadata)){if(null==this.fileToUpload)throw new Error("This shouldn't have happened");this.uploadCert(this.certService.uploadFile(this.id,this.fileToUpload))}else this.uploadCert(this.certService.uploadViaMetaData(this.id,this.metadata))}uploadCert(t){t.subscribe(()=>{this.certService.updateCertCache(this.id),this.toastr.success(this.translate.instant("Clients.Saml.CertUploadSuccess"),this.translate.instant("Notifications.Success")),this.close()},i=>{switch(i.status){case 400:case 500:this.toastr.error(this.translate.instant("Clients.Saml.InvalidCert"),this.translate.instant("Notifications.Failure"));break;case 409:this.toastr.warning(this.translate.instant("Clients.Saml.DuplicateCertMessage"),this.translate.instant("Clients.Saml.DuplicateCert"));break;default:this.errorService.handleError(i)}})}open(){this.uploadCertModal.show()}close(){this.reset(),this.uploadCertModal.hide()}reset(){this.metadata="",this.fileToUpload=null,this.fileInput.nativeElement.value=null}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(m.Z),e.Y36(V.U),e.Y36(d.sK),e.Y36(M._W),e.Y36(I.T))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-cert-uploader"]],viewQuery:function(t,i){if(1&t&&(e.Gf(_t,7),e.Gf(vt,7)),2&t){let o;e.iGM(o=e.CRH())&&(i.uploadCertModal=o.first),e.iGM(o=e.CRH())&&(i.fileInput=o.first)}},inputs:{certType:"certType",certExists:"certExists"},decls:46,vars:39,consts:[["bsModal","","id","uploadCertModal","role","dialog","aria-hidden","true","tabindex","-1",1,"modal",3,"config"],["uploadCertModal","bs-modal"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],["type","button",1,"modal-close",3,"click"],["aria-hidden","true",1,"fas","fa-times"],[1,"sr-only"],[1,"modal-body","scrollbars"],[1,"cms","tw-mb-6"],[3,"id","label","help","isLast"],[1,"tw-form-control"],["id","fileInput","type","file","name","cert","accept",".cer",1,"tw-form-file","tw-max-w-full",3,"disabled","change"],["fileInput","","selectedFile",""],[1,"tw-flex","tw-items-center","tw-justify-center","tw-border-b","tw-border-grey-300","tw-my-8","tw-relative","tw-z-10"],[1,"tw-inline-block","tw-bg-grey-100","tw-text-xs","tw-leading-none","tw-uppercase","tw-text-grey-500","tw--my-2","tw-px-2"],["id","metaData",1,"tw-form-control",3,"disabled","ngModel","ngModelChange"],[1,"modal-body-fade"],[1,"modal-footer"],[1,"tw-flex","tw-items-center"],[1,"tw-mr-auto"],["type","button","id","save",1,"tw-btn-success","tw-mr-3",3,"disabled","click"],["type","button","id","reset",1,"tw-btn",3,"disabled","click"],["type","button","id","cancel",1,"tw-btn-link","tw--mr-4",3,"click"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0,1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h4",5),e._uU(6),e.ALo(7,"translate"),e.qZA(),e.TgZ(8,"button",6),e.NdJ("click",function(){return i.close()}),e._UZ(9,"span",7),e.TgZ(10,"span",8),e._uU(11),e.ALo(12,"translate"),e.qZA()()(),e.TgZ(13,"div",9)(14,"div",10)(15,"p"),e._uU(16),e.ALo(17,"translate"),e._UZ(18,"br"),e.TgZ(19,"small"),e._uU(20),e.ALo(21,"translate"),e.qZA()()(),e.TgZ(22,"app-form-row",11)(23,"div",12)(24,"input",13,14),e.NdJ("change",function(s){return i.handleFileInput(s.target.files)}),e.qZA()()(),e.TgZ(27,"div",15)(28,"span",16),e._uU(29),e.ALo(30,"translate"),e.qZA()(),e.TgZ(31,"app-form-row",11)(32,"textarea",17),e.NdJ("ngModelChange",function(s){return i.metadata=s}),e.qZA()()(),e._UZ(33,"div",18),e.TgZ(34,"div",19)(35,"div",20)(36,"div",21)(37,"button",22),e.NdJ("click",function(){return i.save()}),e._uU(38),e.ALo(39,"translate"),e.qZA(),e.TgZ(40,"button",23),e.NdJ("click",function(){return i.reset()}),e._uU(41),e.ALo(42,"translate"),e.qZA()(),e.TgZ(43,"button",24),e.NdJ("click",function(){return i.close()}),e._uU(44),e.ALo(45,"translate"),e.qZA()()()()()()),2&t&&(e.Q6J("config",e.DdM(38,Tt)),e.xp6(6),e.Oqu(e.lcZ(7,22,"Clients.Saml.AddCert")),e.xp6(5),e.Oqu(e.lcZ(12,24,"Common.Close")),e.xp6(5),e.Oqu(e.lcZ(17,26,"Clients.Saml.AddCertSummary")),e.xp6(4),e.Oqu(e.lcZ(21,28,"Clients.Saml.AddCertNote")),e.xp6(2),e.Q6J("id","fileInput")("label","Clients.Saml.UploadCert")("help","Clients.Saml.UploadCertHelp")("isLast",!0),e.xp6(2),e.Q6J("disabled",""!=i.metadata),e.xp6(5),e.Oqu(e.lcZ(30,30,"Common.Or")),e.xp6(2),e.Q6J("id","metaData")("label","Clients.Saml.ServiceProviderSigningCert")("help","Clients.Saml.ServiceProviderSigningCertHelp")("isLast",!0),e.xp6(1),e.Q6J("disabled",null!=i.fileToUpload)("ngModel",i.metadata),e.xp6(5),e.Q6J("disabled",""==i.metadata&&null==i.fileToUpload),e.xp6(1),e.Oqu(e.lcZ(39,32,"Common.Save")),e.xp6(2),e.Q6J("disabled",""==i.metadata&&null==i.fileToUpload),e.xp6(1),e.Oqu(e.lcZ(42,34,"Common.Reset")),e.xp6(3),e.Oqu(e.lcZ(45,36,"Common.Cancel")))},dependencies:[a.Fj,a.JJ,a.On,u.L,H.oB,d.X$],encapsulation:2}),n})(),bt=(()=>{class n{constructor(t,i,o,s,c){this.translateService=t,this.serviceProviderCache=i,this.serviceProviderService=o,this.clientCachingService=s,this.errorService=c}ngOnInit(){this.serviceProviderCache.unsavedCache$.subscribe(t=>{this.serviceProvider=t,this.signingCertificates=t.signingCertificates.slice()}),this.clientCachingService.unsavedCache$.pipe((0,h.P)()).subscribe(t=>{this.clientId=t.id})}updateCache(){this.serviceProviderCache.componentDirtyValidMap.set("SamlRequestTabComponent",{isValid:!0}),this.serviceProviderCache.unsavedCache.next(this.serviceProvider)}removeCert(t){this.serviceProviderService.deleteSigningCertificate(this.clientId,t.thumbprint).subscribe(()=>{const i=this.signingCertificates.indexOf(t);this.signingCertificates.splice(i,1),this.serviceProvider.signingCertificates=this.signingCertificates,this.serviceProviderCache.unsavedCache.next(this.serviceProvider)},i=>{this.errorService.handleError(i)})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(d.sK),e.Y36(J.S),e.Y36(B.G),e.Y36(m.Z),e.Y36(I.T))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-client-saml-request"]],features:[e._Bn([{provide:V.U,useExisting:ft.L}])],decls:23,vars:22,consts:[[3,"id","label","help"],[3,"id"],["id","requireDestination","name","requireDestination","type","checkbox",1,"tw-form-switch__input",3,"ngModel","ngModelChange","click"],[1,"tw-form-select"],["id","requireRequestsSigned",1,"tw-form-control",3,"ngModel","ngModelChange","change"],[3,"ngValue"],["id","requireSignedArtifactResolveRequests","name","requireSignedArtifactResolveRequests","type","checkbox",1,"tw-form-switch__input",3,"ngModel","ngModelChange","click"],["right",""],["type","button",1,"tw-btn-success",3,"click"],[3,"certificates","deleteCertDisabled","delete"],["id","certUploadTest"],["certUpload",""]],template:function(t,i){if(1&t){const o=e.EpF();e.TgZ(0,"app-form-row",0)(1,"app-form-toggle",1)(2,"input",2),e.NdJ("ngModelChange",function(c){return i.serviceProvider.requireSamlMessageDestination=c})("click",function(){return i.updateCache()}),e.qZA()()(),e.TgZ(3,"app-form-row",0)(4,"div",3)(5,"select",4),e.NdJ("ngModelChange",function(c){return i.serviceProvider.requireAuthenticationRequestsSigned=c})("change",function(){return i.updateCache()}),e.TgZ(6,"option",5),e._uU(7,"Default/Global"),e.qZA(),e.TgZ(8,"option",5),e._uU(9,"True"),e.qZA(),e.TgZ(10,"option",5),e._uU(11,"False"),e.qZA()()()(),e.TgZ(12,"app-form-row",0)(13,"app-form-toggle",1)(14,"input",6),e.NdJ("ngModelChange",function(c){return i.serviceProvider.requireSignedArtifactResolveRequests=c})("click",function(){return i.updateCache()}),e.qZA()()(),e.TgZ(15,"app-action-bar"),e.ynx(16,7),e.TgZ(17,"button",8),e.NdJ("click",function(){e.CHM(o);const c=e.MAs(22);return e.KtG(c.open())}),e._uU(18),e.ALo(19,"translate"),e.qZA(),e.BQk(),e.qZA(),e.TgZ(20,"app-saml-cert-list",9),e.NdJ("delete",function(c){return i.removeCert(c)}),e.qZA(),e._UZ(21,"app-cert-uploader",10,11)}2&t&&(e.Q6J("id","requireDestination")("label","Clients.Saml.RequireRequestDestination")("help","Clients.Saml.RequireRequestDestinationHelp"),e.xp6(1),e.Q6J("id","requireDestination"),e.xp6(1),e.Q6J("ngModel",i.serviceProvider.requireSamlMessageDestination),e.xp6(1),e.Q6J("id","requireRequestsSigned")("label","Clients.Saml.RequireRequestsSigned")("help","Clients.Saml.RequireRequestsSignedHelp"),e.xp6(2),e.Q6J("ngModel",i.serviceProvider.requireAuthenticationRequestsSigned),e.xp6(1),e.Q6J("ngValue",null),e.xp6(2),e.Q6J("ngValue",!0),e.xp6(2),e.Q6J("ngValue",!1),e.xp6(2),e.Q6J("id","requireSignedArtifactResolveRequests")("label","Clients.Saml.RequireSignedArtifactResolveRequests")("help","Clients.Saml.RequireSignedArtifactResolveRequestsHelp"),e.xp6(1),e.Q6J("id","requireSignedArtifactResolveRequests"),e.xp6(1),e.Q6J("ngModel",i.serviceProvider.requireSignedArtifactResolveRequests),e.xp6(4),e.hij(" ",e.lcZ(19,20,"Clients.Saml.AddCert")," "),e.xp6(2),e.Q6J("certificates",i.signingCertificates)("deleteCertDisabled",!1))},dependencies:[a.YN,a.Kr,a.Wl,a.EJ,a.JJ,a.On,u.L,f.O,W.z,w.K,ee,d.X$],encapsulation:2}),n})(),St=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-client-saml"]],features:[e._Bn([{provide:q.h,useExisting:J.S}])],decls:10,vars:15,consts:[[3,"pillMode"],[3,"tabTitle","tabValue"],["id","editClientSaml"]],template:function(t,i){1&t&&(e.TgZ(0,"app-custom-tabs",0),e._UZ(1,"app-custom-tab",1)(2,"app-custom-tab",1)(3,"app-custom-tab",1)(4,"app-custom-tab",1)(5,"app-custom-tab",1)(6,"app-custom-tab",1)(7,"app-custom-tab",1),e.qZA(),e.TgZ(8,"div",2),e._UZ(9,"router-outlet"),e.qZA()),2&t&&(e.Q6J("pillMode",!0),e.xp6(1),e.Q6J("tabTitle","Clients.Saml.ACSEndpoints")("tabValue","acsendpoints"),e.xp6(1),e.Q6J("tabTitle","Clients.Saml.SLOEndpoints")("tabValue","sloendpoints"),e.xp6(1),e.Q6J("tabTitle","Clients.Saml.ARSEndpoints")("tabValue","arsendpoints"),e.xp6(1),e.Q6J("tabTitle","Clients.ClaimMappings.Heading")("tabValue","claimmappings"),e.xp6(1),e.Q6J("tabTitle","Clients.Saml.Request")("tabValue","request"),e.xp6(1),e.Q6J("tabTitle","Clients.Saml.Response")("tabValue","response"),e.xp6(1),e.Q6J("tabTitle","Common.Advanced")("tabValue","advanced"))},dependencies:[b.lC,E.v,D.x],encapsulation:2}),n})();const wt=["enterEndpointBox"],yt=["endpointIndex"],At=["editEndpointModal"],Mt=["addButton"];function Zt(n,l){if(1&n&&(e.TgZ(0,"option",29),e._uU(1),e.qZA()),2&n){const t=l.$implicit;e.Q6J("value",t.location),e.xp6(1),e.Oqu(null==t?null:t.location)}}function kt(n,l){1&n&&(e.TgZ(0,"p",30),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"Clients.Saml.DefaultEndpointNotice")," "))}function Jt(n,l){if(1&n){const t=e.EpF();e.TgZ(0,"form",2)(1,"app-form-row",23)(2,"div",24)(3,"select",25,26),e.NdJ("change",function(){e.CHM(t);const o=e.MAs(4),s=e.oxw(2);return e.KtG(s.onDefaultChange(o.value))}),e.YNc(5,Zt,2,2,"option",27),e.qZA()(),e.YNc(6,kt,3,3,"p",28),e.qZA()()}if(2&n){const t=e.oxw(2);e.Q6J("formGroup",t.defaultSelectForm),e.xp6(1),e.Q6J("id",t.endpointType+"defaultEndpoint")("label","Clients.Saml.DefaultEndpoint")("help","Clients.Saml.DefaultEndpointHelp"),e.xp6(2),e.Q6J("id",t.endpointType+"defaultEndpoint"),e.xp6(2),e.Q6J("ngForOf",t.endpoints),e.xp6(1),e.Q6J("ngIf",(null==t.endpoints?null:t.endpoints.length)<1)}}function xt(n,l){if(1&n){const t=e.EpF();e.TgZ(0,"div")(1,"div",14)(2,"div")(3,"h2",15),e._uU(4),e.qZA(),e.TgZ(5,"p"),e._uU(6),e.qZA()()(),e.YNc(7,Jt,7,7,"form",16),e.TgZ(8,"app-action-bar"),e.ynx(9,17),e.TgZ(10,"button",18,19),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.openAddModal())}),e._uU(12),e.ALo(13,"translate"),e.qZA(),e.BQk(),e.qZA(),e.TgZ(14,"app-data-table",20),e.NdJ("onSelect",function(o){e.CHM(t);const s=e.oxw();return e.KtG(s.editEndpoint(o))}),e._UZ(15,"app-data-table-column",21)(16,"app-data-table-column",22)(17,"app-data-table-column",22),e.qZA()()}if(2&n){const t=e.oxw();e.xp6(4),e.Oqu(t.endpointHelpTextTitle),e.xp6(2),e.Oqu(t.endpointHelpTextBody),e.xp6(1),e.Q6J("ngIf",t.endpoints),e.xp6(3),e.Q6J("id",t.endpointType+"addEndpointButton"),e.xp6(2),e.hij(" ",e.lcZ(13,19,"Clients.Saml.AddEndpoint")," "),e.xp6(2),e.Q6J("rows",t.endpoints)("norowslabel","Clients.Saml.NoEndpoints")("actions",t.endpointActions),e.xp6(1),e.Q6J("title","Clients.Saml.LocationUrl")("prop","location")("cellClasses","tw-max-w-0 tw-truncate tw-font-semibold"),e.xp6(1),e.Q6J("title","Clients.Saml.BindingType")("prop","binding")("headClasses","tw-w-1/2 md:tw-w-1/3")("cellClasses","tw-max-w-0 tw-truncate"),e.xp6(1),e.Q6J("title","Clients.Saml.Index")("prop","index")("headClasses","tw-text-center sm:tw-w-24")("cellClasses","tw-text-center")}}function Ut(n,l){1&n&&(e.TgZ(0,"small",31),e._UZ(1,"span",32),e._uU(2),e.ALo(3,"translate"),e.qZA()),2&n&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"Clients.Saml.LocationBindingUnique")," "))}function Lt(n,l){1&n&&(e.TgZ(0,"option",33),e._uU(1,"POST"),e.qZA())}function It(n,l){1&n&&(e.TgZ(0,"option",34),e._uU(1,"Redirect"),e.qZA())}function Rt(n,l){1&n&&(e.TgZ(0,"option",35),e._uU(1,"HTTP Artifact"),e.qZA())}function Pt(n,l){1&n&&(e.TgZ(0,"option",36),e._uU(1,"SOAP"),e.qZA())}function Qt(n,l){1&n&&(e.TgZ(0,"small",31),e._UZ(1,"span",32),e._uU(2),e.ALo(3,"translate"),e.qZA()),2&n&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"Clients.Saml.LocationBindingUnique")," "))}function Ot(n,l){1&n&&(e.TgZ(0,"small",31),e._UZ(1,"span",32),e._uU(2),e.ALo(3,"translate"),e.qZA()),2&n&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"Clients.Saml.IndexNotUnique")," "))}function qt(n,l){1&n&&(e.TgZ(0,"small",31),e._UZ(1,"span",32),e._uU(2),e.ALo(3,"translate"),e.qZA()),2&n&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"Clients.Saml.LocationBindingUnique")," "))}function Nt(n,l){1&n&&(e.TgZ(0,"option",33),e._uU(1,"POST"),e.qZA())}function Ft(n,l){1&n&&(e.TgZ(0,"option",34),e._uU(1,"Redirect"),e.qZA())}function Et(n,l){1&n&&(e.TgZ(0,"option",35),e._uU(1,"HTTP Artifact"),e.qZA())}function Dt(n,l){1&n&&(e.TgZ(0,"option",36),e._uU(1,"SOAP"),e.qZA())}function Vt(n,l){1&n&&(e.TgZ(0,"small",31),e._UZ(1,"span",32),e._uU(2),e.ALo(3,"translate"),e.qZA()),2&n&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"Clients.Saml.LocationBindingUnique")," "))}function Bt(n,l){1&n&&(e.TgZ(0,"small",31),e._UZ(1,"span",32),e._uU(2),e.ALo(3,"translate"),e.qZA()),2&n&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"Clients.Saml.IndexNotUnique")," "))}function Gt(n,l){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"app-form-row",3)(2,"input",37),e.NdJ("keyup",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.validateEdit(o.editingEndpoint))})("ngModelChange",function(o){e.CHM(t);const s=e.oxw();return e.KtG(s.editingEndpoint.location=o)}),e.qZA(),e.YNc(3,qt,4,3,"small",5),e.qZA(),e.TgZ(4,"app-form-row",3)(5,"div",24)(6,"select",38),e.NdJ("ngModelChange",function(o){e.CHM(t);const s=e.oxw();return e.KtG(s.editingEndpoint.binding=o)})("keyup",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.validateEdit(o.editingEndpoint))})("change",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.validateEdit(o.editingEndpoint))}),e.YNc(7,Nt,2,0,"option",8),e.YNc(8,Ft,2,0,"option",9),e.YNc(9,Et,2,0,"option",10),e.YNc(10,Dt,2,0,"option",11),e.qZA()(),e.YNc(11,Vt,4,3,"small",5),e.qZA(),e.TgZ(12,"app-form-row",3)(13,"input",39),e.NdJ("ngModelChange",function(o){e.CHM(t);const s=e.oxw();return e.KtG(s.editingEndpoint.index=o)})("keyup",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.validateEdit(o.editingEndpoint))})("change",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.validateEdit(o.editingEndpoint))}),e.qZA(),e.YNc(14,Bt,4,3,"small",5),e.qZA(),e.BQk()}if(2&n){const t=e.oxw();e.xp6(1),e.Q6J("id","editLocation")("label","Clients.Endpoint")("isLast",!1),e.xp6(1),e.s9C("value",t.editingEndpoint.location),e.Q6J("ngModel",t.editingEndpoint.location),e.xp6(1),e.Q6J("ngIf",t.addEndpointForm.hasError("unique")),e.xp6(1),e.Q6J("id","editBinding")("label","Clients.Saml.BindingType")("isLast",!1),e.xp6(2),e.s9C("value",t.editingEndpoint.binding),e.Q6J("ngModel",t.editingEndpoint.binding),e.xp6(1),e.Q6J("ngIf","ars"!=t.endpointType),e.xp6(1),e.Q6J("ngIf","ars"!=t.endpointType),e.xp6(1),e.Q6J("ngIf","ars"!=t.endpointType),e.xp6(1),e.Q6J("ngIf","ars"==t.endpointType),e.xp6(1),e.Q6J("ngIf",t.addEndpointForm.hasError("unique")),e.xp6(1),e.Q6J("id","editIndex")("label","Clients.Saml.Index")("isLast",!0),e.xp6(1),e.Q6J("ngModel",t.editingEndpoint.index),e.xp6(1),e.Q6J("ngIf",t.index.hasError("unique"))}}let G=(()=>{class n{constructor(t,i,o,s,c,_,A){this.activatedRoute=t,this.providerService=i,this.fb=o,this.cachingService=s,this.modalService=c,this.translate=_,this.dataTableService=A,this.endpointType="",this.endpoints=[],this.endpointActions=[C.Xz.Delete,C.Xz.Select],this.editEndpointsActions=[v.n.Save],this.editEndpointsModalId="editModal",this.addModalActions=[v.n.Save],this.addModalId="addModal"}get url(){return this.addEndpointForm.get("url")}get binding(){return this.addEndpointForm.get("binding")}get index(){return this.addEndpointForm.get("index")}ngOnInit(){this.endpointType=this.activatedRoute.snapshot.data.endpointType,this.defaultSelectForm=this.fb.group({defaultEndpoint:[""]}),this.cachingService.unsavedCache$.pipe((0,h.P)()).subscribe(t=>{switch(this.serviceProvider=t,this.endpointType){case"acs":this.endpoints=this.serviceProvider.assertionConsumerServices.slice(),this.endpointHelpTextTitle=this.translate.instant("Clients.Saml.ACSEndpointHelpTitle"),this.endpointHelpTextBody=this.translate.instant("Clients.Saml.ACSEndpointsHelpBody");break;case"slo":this.endpoints=this.serviceProvider.singleLogoutServices.slice(),this.endpointHelpTextTitle=this.translate.instant("Clients.Saml.SLOEndpointsHelpTitle"),this.endpointHelpTextBody=this.translate.instant("Clients.Saml.SLOEndpointsHelpBody");break;case"ars":this.endpoints=this.serviceProvider.artifactResolutionServices.slice(),this.endpointHelpTextTitle=this.translate.instant("Clients.Saml.ARSEndpointsHelpTitle"),this.endpointHelpTextBody=this.translate.instant("Clients.Saml.ARSEndpointsHelpBody")}this.addEndpointForm=this.fb.group({url:["",[a.kI.required,a.kI.pattern("^https?://.*$")]],binding:["",[a.kI.required]],index:["",[a.kI.min(0),a.kI.max(99),Ht(this.endpoints),a.kI.required]]},{validators:Yt(this.endpoints)}),this.rebuildForm()}),this.dtsSubscription=this.dataTableService.deleteRowEvent.subscribe(t=>{this.removeEndpoint(t)})}ngOnDestroy(){this.dtsSubscription.unsubscribe()}rebuildForm(){if(this.addEndpointForm.reset(),this.endpoints.length>0){const t=this.endpoints.find(i=>i.isDefault);this.defaultSelectForm.setValue({defaultEndpoint:t.location})}else this.defaultSelectForm.setValue({defaultEndpoint:""})}editEndpoint(t){const i=t.data;this.endpoints.forEach(o=>{o.obinding=o.binding,o.oindex=o.index,o.olocation=o.location,o.index===i.index&&(o.editing=!0,this.editingEndpoint=i,this.modalService.showById(this.editEndpointsModalId,t.element?t.element:null))}),this.cachingService.componentDirtyValidMap.set("ServiceProviderComponent",{isValid:!1})}openAddModal(){this.addEndpointForm.reset(),this.modalService.showById(this.addModalId,this.addButtonRef)}cancelAdd(){this.modalService.hideById(this.addModalId)}cancelEdit(){this.endpoints.forEach(t=>{!0===t.editing&&(t.editing=!1,this.modalService.hideById(this.editEndpointsModalId)),t.binding=t.obinding,t.index=t.oindex,t.location=t.olocation}),this.cachingService.componentDirtyValidMap.set("ServiceProviderComponent",{isValid:!0})}validateEdit(t){const i=this.endpoints.filter(o=>o!==t);t.valid=!(t.index<0||t.index>99||!ie(i,t.index)||!te(i,t.location,t.binding))}saveEndpoint(t){t.editing=!1,this.updateEndpoints()}sortEndpointsByIndex(){this.endpoints.sort((t,i)=>t.index-i.index)}addEndpoint(){const t=this.addEndpointForm.get("url").value,i=this.addEndpointForm.get("binding").value,o=this.addEndpointForm.get("index").value;this.endpoints.push({binding:i,index:o,isDefault:!1,location:t,editing:!1,valid:!0}),1===this.endpoints.length&&(this.endpoints[0].isDefault=!0),this.updateEndpoints(),this.addEndpointForm.reset(),this.rebuildForm()}removeEndpoint(t){const i=this.endpoints[t];this.endpoints=this.endpoints.filter(o=>o!==i),this.updateEndpoints(),this.rebuildForm()}updateEndpoints(){switch(this.endpointType){case"acs":this.serviceProvider.assertionConsumerServices=this.endpoints.slice();break;case"slo":this.serviceProvider.singleLogoutServices=this.endpoints.slice();break;case"ars":this.serviceProvider.artifactResolutionServices=this.endpoints.slice()}this.editEndpointModal&&this.editEndpointModal.hide(),this.serviceProvider.dirty=!0,this.cachingService.componentDirtyValidMap.set("ServiceProviderComponent",{isValid:!0}),this.cachingService.unsavedCache.next(this.serviceProvider),this.sortEndpointsByIndex()}onDefaultChange(t){this.endpoints.forEach(i=>{i.isDefault=i.location===t}),this.updateEndpoints()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(b.gz),e.Y36(B.G),e.Y36(a.QS),e.Y36(J.S),e.Y36(Z.Z),e.Y36(d.sK),e.Y36(x.n))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-client-serviceprovider"]],viewQuery:function(t,i){if(1&t&&(e.Gf(wt,5),e.Gf(yt,5),e.Gf(At,7),e.Gf(Mt,5)),2&t){let o;e.iGM(o=e.CRH())&&(i.endpointInput=o.first),e.iGM(o=e.CRH())&&(i.indexInput=o.first),e.iGM(o=e.CRH())&&(i.editEndpointModal=o.first),e.iGM(o=e.CRH())&&(i.addButtonRef=o.first)}},decls:19,vars:30,consts:[[4,"ngIf"],[3,"actions","title","modalId","addDisabled","onCancel","onSave"],[3,"formGroup"],[3,"id","label","isLast"],["type","url","required","","formControlName","url",1,"tw-form-control","tw-max-w-full",3,"id"],["class","text-danger",4,"ngIf"],[1,"tw-form-select","tw-max-w-full"],["required","","formControlName","binding",1,"tw-form-control","tw-max-w-full",3,"id"],["value","urn:oasis:names:tc:SAML:2.0:bindings:HTTP-POST",4,"ngIf"],["value","urn:oasis:names:tc:SAML:2.0:bindings:HTTP-Redirect",4,"ngIf"],["value","urn:oasis:names:tc:SAML:2.0:bindings:HTTP-Artifact",4,"ngIf"],["value","urn:oasis:names:tc:SAML:2.0:bindings:SOAP",4,"ngIf"],["type","number","min","0","formControlName","index",1,"tw-form-control","tw-max-w-full",3,"id"],[3,"actions","title","modalId","addDisabled","onSave","onCancel"],["role","alert",1,"tw-alert","tw-mb-8"],[1,"tw-font-semibold"],[3,"formGroup",4,"ngIf"],["right",""],[1,"tw-btn-success",3,"id","click"],["addButton",""],[3,"rows","norowslabel","actions","onSelect"],[3,"title","prop","cellClasses"],[3,"title","prop","headClasses","cellClasses"],[3,"id","label","help"],[1,"tw-form-select"],["formControlName","defaultEndpoint",1,"tw-form-control",3,"id","change"],["defaultEndpoint",""],[3,"value",4,"ngFor","ngForOf"],["class","tw-form-text",4,"ngIf"],[3,"value"],[1,"tw-form-text"],[1,"text-danger"],["aria-hidden","true",1,"fas","fa-exclamation-triangle","tw-mr-1"],["value","urn:oasis:names:tc:SAML:2.0:bindings:HTTP-POST"],["value","urn:oasis:names:tc:SAML:2.0:bindings:HTTP-Redirect"],["value","urn:oasis:names:tc:SAML:2.0:bindings:HTTP-Artifact"],["value","urn:oasis:names:tc:SAML:2.0:bindings:SOAP"],["type","url","id","editLocation",1,"tw-form-control",3,"value","ngModel","keyup","ngModelChange"],["id","editBinding",1,"tw-form-control",3,"value","ngModel","ngModelChange","keyup","change"],["type","number","min","0","id","editIndex",1,"tw-form-control",3,"ngModel","ngModelChange","keyup","change"]],template:function(t,i){1&t&&(e.YNc(0,xt,18,21,"div",0),e.TgZ(1,"app-custom-modal",1),e.NdJ("onCancel",function(){return i.cancelAdd()})("onSave",function(){return i.addEndpoint()}),e.TgZ(2,"form",2)(3,"app-form-row",3),e._UZ(4,"input",4),e.YNc(5,Ut,4,3,"small",5),e.qZA(),e.TgZ(6,"app-form-row",3)(7,"div",6)(8,"select",7),e.YNc(9,Lt,2,0,"option",8),e.YNc(10,It,2,0,"option",9),e.YNc(11,Rt,2,0,"option",10),e.YNc(12,Pt,2,0,"option",11),e.qZA()(),e.YNc(13,Qt,4,3,"small",5),e.qZA(),e.TgZ(14,"app-form-row",3),e._UZ(15,"input",12),e.YNc(16,Ot,4,3,"small",5),e.qZA()()(),e.TgZ(17,"app-custom-modal",13),e.NdJ("onSave",function(){return i.saveEndpoint(i.editingEndpoint)})("onCancel",function(){return i.cancelEdit()}),e.YNc(18,Gt,15,21,"ng-container",0),e.qZA()),2&t&&(e.Q6J("ngIf",i.serviceProvider),e.xp6(1),e.Q6J("actions",i.addModalActions)("title","Clients.Saml.AddEndpoint")("modalId",i.addModalId)("addDisabled",!i.addEndpointForm.valid),e.xp6(1),e.Q6J("formGroup",i.addEndpointForm),e.xp6(1),e.Q6J("id",i.endpointType+"url")("label","Clients.Endpoint")("isLast",!1),e.xp6(1),e.Q6J("id",i.endpointType+"url"),e.xp6(1),e.Q6J("ngIf",i.addEndpointForm.hasError("unique")),e.xp6(1),e.Q6J("id",i.endpointType+"binding")("label","Clients.Saml.BindingType")("isLast",!1),e.xp6(2),e.Q6J("id",i.endpointType+"binding"),e.xp6(1),e.Q6J("ngIf","ars"!=i.endpointType),e.xp6(1),e.Q6J("ngIf","ars"!=i.endpointType),e.xp6(1),e.Q6J("ngIf","ars"!=i.endpointType),e.xp6(1),e.Q6J("ngIf","ars"==i.endpointType),e.xp6(1),e.Q6J("ngIf",i.addEndpointForm.hasError("unique")),e.xp6(1),e.Q6J("id",i.endpointType+"index")("label","Clients.Saml.Index")("isLast",!0),e.xp6(1),e.Q6J("id",i.endpointType+"index"),e.xp6(1),e.Q6J("ngIf",i.index.hasError("unique")),e.xp6(1),e.Q6J("actions",i.editEndpointsActions)("title","Clients.Saml.EditEndpoint")("modalId",i.editEndpointsModalId)("addDisabled",!(null!=i.editingEndpoint&&i.editingEndpoint.valid)),e.xp6(1),e.Q6J("ngIf",i.editingEndpoint))},dependencies:[g.sg,g.O5,a._Y,a.YN,a.Kr,a.Fj,a.wV,a.EJ,a.JJ,a.JL,a.Q7,a.qQ,a.On,a.sg,a.u,u.L,C.Qj,U.E,w.K,k.R,d.X$],encapsulation:2}),n})();function Yt(n){return l=>{const t=l.get("url").value,i=l.get("binding").value;return te(n,t,i)?null:{unique:!0}}}function te(n,l,t){return 0===n.length||null===l||null===t||!n.some(i=>l.trim().toLowerCase()===i.location.trim().toLowerCase()&&t===i.binding)}function Ht(n){return l=>ie(n,l.value)?null:{unique:!0}}function ie(n,l){return 0===n.length||!n.some(t=>t.index===l)}var $t=r(3883);function jt(n,l){if(1&n){const t=e.EpF();e.TgZ(0,"button",11),e.NdJ("click",function(){e.CHM(t),e.oxw();const o=e.MAs(14);return e.KtG(o.open())}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"Clients.Saml.AddCert")," "))}function Kt(n,l){if(1&n){const t=e.EpF();e.TgZ(0,"button",12),e.NdJ("click",function(){e.CHM(t),e.oxw();const o=e.MAs(14);return e.KtG(o.open())}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"Clients.Saml.ReplaceCertificate")," "))}let zt=(()=>{class n{constructor(t,i,o,s){this.serviceProviderCache=t,this.serviceProviderService=i,this.clientCachingService=o,this.errorService=s,this.canDeleteCert=!1}ngOnInit(){this.serviceProviderCache.unsavedCache$.subscribe(t=>{this.serviceProvider=t,this.encryptionCertificates=this.serviceProvider.encryptionCertificate?[t.encryptionCertificate]:[]}),this.clientCachingService.unsavedCache$.pipe((0,h.P)()).subscribe(t=>{this.clientId=t.id}),this.serviceProviderCache.savedCache$.subscribe(t=>{this.canDeleteCert=t.encryptAssertions})}updateCache(){this.serviceProviderCache.componentDirtyValidMap.set("SamlResponseTabComponent",{isValid:!0}),this.serviceProviderCache.unsavedCache.next(this.serviceProvider)}removeCert(){this.serviceProviderService.deleteEncryptionCertificate(this.clientId).subscribe(()=>{this.serviceProvider.encryptionCertificate=null,this.encryptionCertificates=[],this.serviceProviderCache.unsavedCache.next(this.serviceProvider)},t=>{this.errorService.handleError(t)})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(J.S),e.Y36(B.G),e.Y36(m.Z),e.Y36(I.T))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-saml-response-tab"]],features:[e._Bn([{provide:V.U,useClass:$t.i}])],decls:15,vars:20,consts:[[3,"id","label","help"],[3,"id"],["id","signAssertions","name","signAssertions","type","checkbox",1,"tw-form-switch__input",3,"ngModel","ngModelChange","click"],["id","encryptAssertions","name","encryptAssertions","type","checkbox",1,"tw-form-switch__input",3,"ngModel","ngModelChange","click"],["id","signResponses","name","requireSignedArtifactResponses","type","checkbox",1,"tw-form-switch__input",3,"ngModel","ngModelChange","click"],[3,"certificates","showSingle","deleteCertDisabled","delete"],["addButton",""],["id","addCertButton","class","tw-btn-success","type","button",3,"click",4,"ngIf"],["id","replaceCertButton","class","tw-btn-success tw-mr-4","type","button",3,"click",4,"ngIf"],["id","certUploadTest"],["certUpload",""],["id","addCertButton","type","button",1,"tw-btn-success",3,"click"],["id","replaceCertButton","type","button",1,"tw-btn-success","tw-mr-4",3,"click"]],template:function(t,i){1&t&&(e.TgZ(0,"app-form-row",0)(1,"app-form-toggle",1)(2,"input",2),e.NdJ("ngModelChange",function(s){return i.serviceProvider.signAssertions=s})("click",function(){return i.updateCache()}),e.qZA()()(),e.TgZ(3,"app-form-row",0)(4,"app-form-toggle",1)(5,"input",3),e.NdJ("ngModelChange",function(s){return i.serviceProvider.encryptAssertions=s})("click",function(){return i.updateCache()}),e.qZA()()(),e.TgZ(6,"app-form-row",0)(7,"app-form-toggle",1)(8,"input",4),e.NdJ("ngModelChange",function(s){return i.serviceProvider.requireSignedArtifactResponses=s})("click",function(){return i.updateCache()}),e.qZA()()(),e.TgZ(9,"app-saml-cert-list",5),e.NdJ("delete",function(){return i.removeCert()}),e.ynx(10,6),e.YNc(11,jt,3,3,"button",7),e.YNc(12,Kt,3,3,"button",8),e.BQk(),e.qZA(),e._UZ(13,"app-cert-uploader",9,10)),2&t&&(e.Q6J("id","signAssertions")("label","Clients.Saml.SignAssertions")("help","Clients.Saml.SignAssertionsHelp"),e.xp6(1),e.Q6J("id","signAssertions"),e.xp6(1),e.Q6J("ngModel",i.serviceProvider.signAssertions),e.xp6(1),e.Q6J("id","encryptAssertions")("label","Clients.Saml.EncryptAssertions")("help","Clients.Saml.EncryptAssertionsHelp"),e.xp6(1),e.Q6J("id","encryptAssertions"),e.xp6(1),e.Q6J("ngModel",i.serviceProvider.encryptAssertions),e.xp6(1),e.Q6J("id","signResponses")("label","Clients.Saml.RequireSignedArtifactResponses")("help","Clients.Saml.RequireSignedArtifactResponsesHelp"),e.xp6(1),e.Q6J("id","signResponses"),e.xp6(1),e.Q6J("ngModel",i.serviceProvider.requireSignedArtifactResponses),e.xp6(1),e.Q6J("certificates",i.encryptionCertificates)("showSingle",!0)("deleteCertDisabled",i.canDeleteCert),e.xp6(2),e.Q6J("ngIf",i.encryptionCertificates.length<1),e.xp6(1),e.Q6J("ngIf",i.encryptionCertificates.length>0))},dependencies:[g.O5,a.Wl,a.JJ,a.On,u.L,f.O,W.z,ee,d.X$],encapsulation:2}),n})();var Xt=r(9012),Wt=r(1660);const ei=["secretPicker"];let ti=(()=>{class n{constructor(t,i,o,s){this.clientService=t,this.clientCachingService=i,this.toastr=o,this.translate=s}ngOnInit(){this.requireSecretsubscription=this.clientCachingService.unsavedCache$.pipe((0,h.P)()).subscribe(t=>{this.client=JSON.parse(JSON.stringify(t)),this.requireSecret=t.requireClientSecret}),this.manageSecretStreams()}ngOnDestroy(){this.requireSecretsubscription.unsubscribe(),this.secretAddSubscription.unsubscribe(),this.secretDeleteSubscription.unsubscribe()}submit(){const t=JSON.parse(JSON.stringify(this.client));t.requireClientSecret=this.requireSecret,this.clientCachingService.componentDirtyValidMap.set("ClientSecretsComponent",{isValid:!0}),this.clientCachingService.unsavedCache.next(t)}manageSecretStreams(){this.secretAddSubscription=this.secretPicker.secretsAddStream.subscribe(t=>{this.clientService.addClientSecret(this.client.id,t).subscribe(i=>{this.refreshSecrets()},i=>{this.toastr.error(this.translate.instant("Clients.UnableToAddSecret"),this.translate.instant("Notifications.Error"))})}),this.secretDeleteSubscription=this.secretPicker.secretsRemoveStream.subscribe(t=>{this.clientService.removeClientSecret(this.client.id,t).subscribe(i=>{const o=JSON.parse(JSON.stringify(this.client)),s=o.clientSecrets.findIndex(c=>c.id===t.id);o.clientSecrets.splice(s,1),this.client=o,this.clientCachingService.unsavedCache.next(o),this.toastr.success(this.translate.instant("Clients.RemovedSecret"),this.translate.instant("Notifications.Saving Success Title"))},i=>{this.toastr.error(this.translate.instant("Clients.UnableToRemoveSecret"),this.translate.instant("Notifications.Error"))})})}refreshSecrets(){this.clientService.getClient(this.client.id).subscribe(t=>{this.client.clientSecrets=t.clientSecrets,this.clientCachingService.unsavedCache.next(this.client),this.toastr.success(this.translate.instant("Clients.AddedSecret"),this.translate.instant("Notifications.Saving Success Title"))})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(Xt.a),e.Y36(m.Z),e.Y36(M._W),e.Y36(d.sK))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-client-secrets"]],viewQuery:function(t,i){if(1&t&&e.Gf(ei,7),2&t){let o;e.iGM(o=e.CRH())&&(i.secretPicker=o.first)}},decls:5,vars:7,consts:[[3,"id","label","help"],[3,"id"],["id","requireSecret","type","checkbox","name","requireSecret",1,"tw-form-switch__input",3,"ngModel","ngModelChange","change"],[3,"clientSecrets","nonModelCertPicker"],["secretPicker",""]],template:function(t,i){1&t&&(e.TgZ(0,"app-form-row",0)(1,"app-form-toggle",1)(2,"input",2),e.NdJ("ngModelChange",function(s){return i.requireSecret=s})("change",function(){return i.submit()}),e.qZA()()(),e._UZ(3,"app-secret-picker",3,4)),2&t&&(e.Q6J("id","requireSecret")("label","Clients.RequireSecret.Title")("help","Clients.RequireSecret.Help"),e.xp6(1),e.Q6J("id","requireSecret"),e.xp6(1),e.Q6J("ngModel",i.requireSecret),e.xp6(1),e.Q6J("clientSecrets",i.client.clientSecrets)("nonModelCertPicker",!1))},dependencies:[a.Wl,a.JJ,a.On,u.L,f.O,Wt.P],encapsulation:2}),n})();function ii(n,l){if(1&n&&(e.TgZ(0,"app-form-row",3),e._UZ(1,"input",7),e.qZA()),2&n){const t=e.oxw();e.Q6J("id","backChannelLogoutUri")("label","Clients.Tokens.BackChannelLogoutUri")("help","Clients.Tokens.BackChannelLogoutUriHelp")("isLast",!t.clientViewService.singleSignOut.backChannelLogoutSessionRequired)}}function ni(n,l){1&n&&(e.TgZ(0,"app-form-row",3)(1,"app-form-toggle",4),e._UZ(2,"input",8),e.qZA()()),2&n&&(e.Q6J("id","backChannelLogoutSessionRequired")("label","Clients.Tokens.BackChannelLogoutSessionRequired")("help","Clients.Tokens.BackChannelLogoutSessionRequiredHelp")("isLast",!0),e.xp6(1),e.Q6J("id","backChannelLogoutSessionRequired"))}let oi=(()=>{class n{constructor(t,i,o){this.fb=t,this.clientViewService=i,this.clientCachingService=o}ngOnInit(){this.subscription=this.clientCachingService.unsavedCache$.pipe((0,h.P)()).subscribe(t=>{this.client=JSON.parse(JSON.stringify(t)),this.createForm()})}createForm(){this.singleSignOutForm=this.fb.group({frontChannelLogoutUri:[this.client.frontChannelLogoutUri],frontChannelLogoutSessionRequired:[this.client.frontChannelLogoutSessionRequired],backChannelLogoutUri:[this.client.backChannelLogoutUri],backChannelLogoutSessionRequired:[this.client.backChannelLogoutSessionRequired]}),this.singleSignOutForm.markAsPristine()}ngAfterViewInit(){this.singleSignOutFormSubscription=this.singleSignOutForm.valueChanges.subscribe(t=>{const i=JSON.parse(JSON.stringify(this.client));i.frontChannelLogoutUri=this.singleSignOutForm.controls.frontChannelLogoutUri.value,i.frontChannelLogoutSessionRequired=this.singleSignOutForm.controls.frontChannelLogoutSessionRequired.value,i.backChannelLogoutUri=this.singleSignOutForm.controls.backChannelLogoutUri.value,i.backChannelLogoutSessionRequired=this.singleSignOutForm.controls.backChannelLogoutSessionRequired.value,this.clientCachingService.componentDirtyValidMap.set("ClientSSOComponent",{isValid:this.singleSignOutForm.valid}),this.clientCachingService.unsavedCache.next(i)})}ngOnDestroy(){this.singleSignOutFormSubscription.unsubscribe(),this.subscription.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(a.QS),e.Y36(T.a),e.Y36(m.Z))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-client-single-sign-out"]],decls:8,vars:11,consts:[[3,"formGroup"],[3,"id","label","help"],["id","FrontChannelLogoutUri","type","text","formControlName","frontChannelLogoutUri",1,"tw-form-control"],[3,"id","label","help","isLast"],[3,"id"],["id","FrontChannelLogoutSessionRequired","type","checkbox","formControlName","frontChannelLogoutSessionRequired",1,"tw-form-switch__input"],[3,"id","label","help","isLast",4,"ngIf"],["id","backChannelLogoutUri","type","text","formControlName","backChannelLogoutUri",1,"tw-form-control"],["id","backChannelLogoutSessionRequired","type","checkbox","formControlName","backChannelLogoutSessionRequired",1,"tw-form-switch__input"]],template:function(t,i){1&t&&(e.TgZ(0,"form",0)(1,"app-form-row",1),e._UZ(2,"input",2),e.qZA(),e.TgZ(3,"app-form-row",3)(4,"app-form-toggle",4),e._UZ(5,"input",5),e.qZA()(),e.YNc(6,ii,2,4,"app-form-row",6),e.YNc(7,ni,3,5,"app-form-row",6),e.qZA()),2&t&&(e.Q6J("formGroup",i.singleSignOutForm),e.xp6(1),e.Q6J("id","FrontChannelLogoutUri")("label","Clients.Tokens.FrontChannelLogoutUri")("help","Clients.Tokens.FrontChannelLogoutUriHelp"),e.xp6(2),e.Q6J("id","FrontChannelLogoutSessionRequired")("label","Clients.Tokens.FrontChannelLogoutSessionRequired")("help","Clients.Tokens.FrontChannelLogoutSessionRequiredHelp")("isLast",!i.clientViewService.singleSignOut.backChannelLogoutUri&&!i.clientViewService.singleSignOut.backChannelLogoutSessionRequired),e.xp6(1),e.Q6J("id","FrontChannelLogoutSessionRequired"),e.xp6(2),e.Q6J("ngIf",i.clientViewService.singleSignOut.backChannelLogoutUri),e.xp6(1),e.Q6J("ngIf",i.clientViewService.singleSignOut.backChannelLogoutSessionRequired))},dependencies:[g.O5,a._Y,a.Fj,a.Wl,a.JJ,a.JL,a.sg,a.u,u.L,f.O],encapsulation:2}),n})();var ne=r(6045),si=r(8381);function ai(n,l){if(1&n&&(e.TgZ(0,"app-form-row",5),e._UZ(1,"app-lifetime-picker",6),e.qZA()),2&n){const t=e.oxw();e.Q6J("id","identityTokenLifetime")("label","Clients.Tokens.ClientTokenLifetime")("help","Clients.Tokens.LifetimeInSeconds")("isLast",t.checkLastRow("identityTokenLifetime")),e.xp6(1),e.Q6J("buttons",t.identityTokenLifetimeButtons)}}function li(n,l){if(1&n&&(e.TgZ(0,"app-form-row",5),e._UZ(1,"app-lifetime-picker",7),e.qZA()),2&n){const t=e.oxw();e.Q6J("id","accessTokenLifetime")("label","Clients.Tokens.AccessTokenLifetime")("help","Clients.Tokens.LifetimeInSeconds")("isLast",t.checkLastRow("accessTokenLifetime")),e.xp6(1),e.Q6J("buttons",t.accessTokenLifetimeButtons)}}function ri(n,l){if(1&n&&(e.TgZ(0,"app-form-row",8)(1,"ul",9),e.ALo(2,"translate"),e.TgZ(3,"li",10)(4,"label",11),e._UZ(5,"input",12),e.TgZ(6,"span"),e._uU(7),e.ALo(8,"translate"),e.qZA()()(),e.TgZ(9,"li",10)(10,"label",13),e._UZ(11,"input",14),e.TgZ(12,"span"),e._uU(13),e.ALo(14,"translate"),e.qZA()()()()()),2&n){const t=e.oxw();e.Q6J("label","Clients.Tokens.AccessTokenType")("isLast",t.checkLastRow("accessTokenType")),e.xp6(1),e.uIk("aria-label",e.lcZ(2,7,"Clients.Tokens.AccessTokenType")),e.xp6(4),e.Q6J("value","Jwt"),e.xp6(2),e.Oqu(e.lcZ(8,9,"Clients.Tokens.Jwt")),e.xp6(4),e.Q6J("value","Reference"),e.xp6(2),e.Oqu(e.lcZ(14,11,"Clients.Tokens.Reference"))}}function ci(n,l){if(1&n&&(e.TgZ(0,"app-form-row",5)(1,"app-form-toggle",15),e._UZ(2,"input",16),e.qZA()()),2&n){const t=e.oxw();e.Q6J("id","includeJwtId")("label","Clients.Tokens.IncludeJwtId")("help","Clients.Tokens.IncludeJwtIdHelp")("isLast",t.checkLastRow("includeJwtId")),e.xp6(1),e.Q6J("id","includeJwtId")}}function pi(n,l){if(1&n&&(e.TgZ(0,"app-form-row",5)(1,"app-form-toggle",15),e._UZ(2,"input",17),e.qZA()()),2&n){const t=e.oxw();e.Q6J("id","allowAccessTokensViaBrowser")("label","Clients.Tokens.AccessTokensViaBrowser")("help","Clients.Tokens.AccessTokensViaBrowserSummary")("isLast",t.checkLastRow("allowAccessTokensViaBrowser")),e.xp6(1),e.Q6J("id","allowAccessTokensViaBrowser")}}function di(n,l){if(1&n&&(e.TgZ(0,"app-form-row",5)(1,"app-form-toggle",15),e._UZ(2,"input",18),e.qZA()()),2&n){const t=e.oxw();e.Q6J("id","alwaysIncludeUserClaimsInIdToken")("label","Clients.Tokens.IncludeUserClaimsInIdToken")("help","Clients.Tokens.IncludeUserClaimsInIdTokenHelp")("isLast",t.checkLastRow("alwaysIncludeUserClaimsInIdToken")),e.xp6(1),e.Q6J("id","alwaysIncludeUserClaimsInIdToken")}}function ui(n,l){if(1&n&&(e.TgZ(0,"app-form-row",5),e._UZ(1,"app-lifetime-picker",19),e.qZA()),2&n){const t=e.oxw();e.Q6J("id","authorizationCodeLifetime")("label","Clients.Tokens.AuthCodeLifetime")("help","Clients.Tokens.LifetimeInSeconds")("isLast",t.checkLastRow("authorizationCodeLifetime")),e.xp6(1),e.Q6J("buttons",t.authorizationCodeLifetimeButtons)}}let mi=(()=>{class n{constructor(t,i,o){this.fb=t,this.clientCachingService=i,this.clientViewService=o}ngOnInit(){this.subscription=this.clientCachingService.unsavedCache$.subscribe(t=>{this.client=JSON.parse(JSON.stringify(t)),this.allowIncludeJwt=this.client.accessTokenType===ne.T.Jwt,void 0===this.tokensForm&&this.createForm()}),this.setButtonModels()}ngOnDestroy(){this.subscription.unsubscribe()}setTokenTime(t,i){this.tokensForm.controls[i].setValue(60*t),this.tokensForm.markAsTouched(),this.tokensForm.markAsDirty()}createForm(){this.tokensForm=this.fb.group({identityTokenLifetime:[this.client.identityTokenLifetime,a.kI.min(0)],accessTokenLifetime:[this.client.accessTokenLifetime,a.kI.min(0)],authorizationCodeLifetime:[this.client.authorizationCodeLifetime,a.kI.min(0)],accessTokenType:[this.client.accessTokenType],allowAccessTokensViaBrowser:[this.client.allowAccessTokensViaBrowser],alwaysIncludeUserClaimsInIdToken:[this.client.alwaysIncludeUserClaimsInIdToken],includeJwtId:[{value:this.client.includeJwtId,disabled:!this.allowIncludeJwt}],allowedIdentityTokenSigningAlgorithms:[this.client.allowedIdentityTokenSigningAlgorithms]}),this.tokensForm.markAsPristine()}ngAfterViewInit(){this.subscribeToChangeDetection()}subscribeToChangeDetection(){this.tokensForm.valueChanges.subscribe(t=>{this.allowIncludeJwt=t.accessTokenType===ne.T.Jwt;const i=this.tokensForm.get("includeJwtId");this.allowIncludeJwt&&i.disabled?this.tokensForm.get("includeJwtId").enable():!this.allowIncludeJwt&&!i.disabled&&this.tokensForm.get("includeJwtId").disable();const o=JSON.parse(JSON.stringify(this.client));o.identityTokenLifetime=this.tokensForm.controls.identityTokenLifetime.value,o.accessTokenLifetime=this.tokensForm.controls.accessTokenLifetime.value,o.authorizationCodeLifetime=this.tokensForm.controls.authorizationCodeLifetime.value,o.accessTokenType=this.tokensForm.controls.accessTokenType.value,o.allowAccessTokensViaBrowser=this.tokensForm.controls.allowAccessTokensViaBrowser.value,o.includeJwtId=this.tokensForm.controls.includeJwtId.value,o.alwaysIncludeUserClaimsInIdToken=this.tokensForm.controls.alwaysIncludeUserClaimsInIdToken.value,o.allowedIdentityTokenSigningAlgorithms=this.tokensForm.controls.allowedIdentityTokenSigningAlgorithms.value,this.clientCachingService.componentDirtyValidMap.set("ClientTokensComponent",{isValid:this.tokensForm.valid}),this.clientCachingService.unsavedCache.next(o)})}setButtonModels(){this.identityTokenLifetimeButtons=[{duration:5,unit:p.f.Minutes},{duration:10,unit:p.f.Minutes}],this.accessTokenLifetimeButtons=[{duration:15,unit:p.f.Minutes},{duration:30,unit:p.f.Minutes},{duration:1,unit:p.f.Hour},{duration:5,unit:p.f.Hours}],this.authorizationCodeLifetimeButtons=[{duration:5,unit:p.f.Minutes},{duration:10,unit:p.f.Minutes}]}checkLastRow(t){const i=this.clientViewService.tokens;let o="";return i.authorizationCodeLifetime?o="authorizationCodeLifetime":i.alwaysIncludeUserClaimsInIdToken?o="alwaysIncludeUserClaimsInIdToken":i.allowAccessTokensViaBrowser?o="allowAccessTokensViaBrowser":i.includeJwtId?o="includeJwtId":i.accessTokenType?o="accessTokenType":i.accessTokenLifetime?o="accessTokenLifetime":i.identityTokenLifetime&&(o="identityTokenLifetime"),t===o}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(a.QS),e.Y36(m.Z),e.Y36(T.a))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-client-tokens"]],decls:10,vars:12,consts:[["id","editClientTokens",3,"formGroup"],[3,"id","label"],[3,"form","algorithmControlName"],[3,"id","label","help","isLast",4,"ngIf"],[3,"label","isLast",4,"ngIf"],[3,"id","label","help","isLast"],["id","identityTokenLifetime","formControlName","identityTokenLifetime",3,"buttons"],["id","accessTokenLifetime","formControlName","accessTokenLifetime",3,"buttons"],[3,"label","isLast"],["id","accessTokenTypeGroup","role","group",1,"tw-form-checks"],[1,"tw-form-checks__item"],["for","accessTokenTypeJwt",1,"tw-form-checks__label"],["id","accessTokenTypeJwt","type","radio","name","accessTokenType","formControlName","accessTokenType",1,"tw-form-checks__input",3,"value"],["for","accessTokenTypeReference",1,"tw-form-checks__label"],["id","accessTokenTypeReference","type","radio","name","accessTokenType","formControlName","accessTokenType",1,"tw-form-checks__input",3,"value"],[3,"id"],["id","includeJwtId","type","checkbox","formControlName","includeJwtId",1,"tw-form-switch__input"],["id","allowAccessTokensViaBrowser","type","checkbox","formControlName","allowAccessTokensViaBrowser",1,"tw-form-switch__input"],["id","alwaysIncludeUserClaimsInIdToken","type","checkbox","formControlName","alwaysIncludeUserClaimsInIdToken",1,"tw-form-switch__input"],["id","authorizationCodeLifetime","formControlName","authorizationCodeLifetime",3,"buttons"]],template:function(t,i){1&t&&(e.TgZ(0,"form",0)(1,"app-form-row",1),e._UZ(2,"app-signing-algorithm-picker",2),e.qZA(),e.YNc(3,ai,2,5,"app-form-row",3),e.YNc(4,li,2,5,"app-form-row",3),e.YNc(5,ri,15,13,"app-form-row",4),e.YNc(6,ci,3,5,"app-form-row",3),e.YNc(7,pi,3,5,"app-form-row",3),e.YNc(8,di,3,5,"app-form-row",3),e.YNc(9,ui,2,5,"app-form-row",3),e.qZA()),2&t&&(e.Q6J("formGroup",i.tokensForm),e.xp6(1),e.Q6J("id","allowedIdentityTokenSigningAlgorithms")("label","Clients.Tokens.AllowedIdentityTokenSigningAlgorithms"),e.xp6(1),e.Q6J("form",i.tokensForm)("algorithmControlName","allowedIdentityTokenSigningAlgorithms"),e.xp6(1),e.Q6J("ngIf",i.clientViewService.tokens.identityTokenLifetime),e.xp6(1),e.Q6J("ngIf",i.clientViewService.tokens.accessTokenLifetime),e.xp6(1),e.Q6J("ngIf",i.clientViewService.tokens.accessTokenType),e.xp6(1),e.Q6J("ngIf",i.clientViewService.tokens.includeJwtId),e.xp6(1),e.Q6J("ngIf",i.clientViewService.tokens.allowAccessTokensViaBrowser),e.xp6(1),e.Q6J("ngIf",i.clientViewService.tokens.alwaysIncludeUserClaimsInIdToken),e.xp6(1),e.Q6J("ngIf",i.clientViewService.tokens.authorizationCodeLifetime))},dependencies:[g.O5,a._Y,a.Fj,a.Wl,a._,a.JJ,a.JL,a.sg,a.u,u.L,f.O,y.U,si.m,d.X$],encapsulation:2}),n})();var hi=r(1909),gi=r(4995),Ci=r(1428),fi=r(5046),_i=r(8308);const vi=[{path:"",redirectTo:"details",pathMatch:"full"},{path:"details",component:Ee},{path:"applicationurls",component:_e},{path:"secrets",component:ti},{path:"resources",component:gt,children:[{path:"identity",component:z,data:{resourceType:P.P.Identity}},{path:"protected",component:z,data:{resourceType:P.P.Protected}}]},{path:"advanced",component:Te.U,children:[{path:"consent",component:Qe},{path:"tokens",component:mi},{path:"refreshtokens",component:pt},{path:"singlesignout",component:oi},{path:"deviceflow",component:De},{path:"pkce",component:at},{path:"claims",component:Pe},{path:"granttypes",component:je},{path:"identityproviders",component:ze},{path:"properties",component:rt},{path:"dpop",component:He},{path:"other",component:st}]},{path:"wsfed",component:ut,resolve:{relyingParty:gi.U},children:[{path:"general",component:dt},{path:"claimmappings",component:K}]},{path:"saml",component:St,resolve:{serviceProvider:Ci.d},children:[{path:"acsendpoints",component:G,data:{endpointType:"acs"}},{path:"sloendpoints",component:G,data:{endpointType:"slo"}},{path:"arsendpoints",component:G,data:{endpointType:"ars"}},{path:"claimmappings",component:K},{path:"request",component:bt},{path:"response",component:zt},{path:"advanced",component:Ct}]},{path:"clientaudits",component:hi.J,canActivate:[fi.h,_i.u]},{path:"ciba",component:ve}];let Ti=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[d.aw.forChild({extend:!0}),b.Bz.forChild(vi),d.aw,b.Bz]}),n})();var bi=r(8413),Si=r(5503),wi=r(8192),yi=r(8265),Ai=r(1230),Mi=r(4380),oe=r(9650),Zi=r(1274),ki=r(5785),Ji=r(2147),xi=r(6493),Ui=r(4091),Li=r(8761),Ii=r(5971),Ri=r(5084),Pi=r(7023),Qi=r(6980),Oi=r(8975),qi=r(4022),Ni=r(1436),Fi=r(9858);let Ei=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[Ti,g.ez,a.u5,Si.D,a.UX,oe.I,ae.P4,Ai.M,Ri.y,ki.U,se.fQ,oe.I,yi.j,Ii.s,xi.l,Ji.l,Li.W,le.fx,wi.h,Mi.t,Zi.T,bi.P,Ui.G,Pi._,Qi.K,H.zk,qi.p,Oi.d,Ni.W,Fi.V]}),n})()}}]);